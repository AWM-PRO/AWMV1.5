import base64
exec(base64.b64decode("IyBjb2RlIGJ5IFlheWFuIFhEDQoNCiMgbXkgZmFjZWJvb2sgKCBodHRwczovL3d3dy5mYWNlYm9vay5jb20vS00zOTQ1MyApDQoNCg0KDQojICAgICAgKEMpIENvcHlyaWdodCA0MDcgQXV0aGVudGljIEV4cGxvaXQNCg0KIyAgICAgIFJlYnVpbGQgQ29weXJpZ2h0IENhbid0IG1ha2UgdSByZWFsIHByb2dyYW1tZXI6KQ0KDQojICAgICAgQ29kZWQgQnkgWWF5YW4gWEQuDQoNCmltcG9ydCBvcw0KDQp0cnk6DQoNCiAgICBpbXBvcnQgcmVxdWVzdHMNCg0KZXhjZXB0IEltcG9ydEVycm9yOg0KDQogICAgcHJpbnQoJ1xuIFvDl10gTW9kdWwgcmVxdWVzdHMgYmVsdW0gdGVyaW5zdGFsbCEuLi5cbicpDQoNCiAgICBvcy5zeXN0ZW0oJ3BpcCBpbnN0YWxsIHJlcXVlc3RzJykNCg0KDQoNCnRyeToNCg0KICAgIGltcG9ydCBjb25jdXJyZW50LmZ1dHVyZXMNCg0KZXhjZXB0IEltcG9ydEVycm9yOg0KDQogICAgcHJpbnQoJ1xuIFvDl10gTW9kdWwgRnV0dXJlcyBiZWx1bSB0ZXJpbnN0YWxsIS4uLlxuJykNCg0KICAgIG9zLnN5c3RlbSgncGlwIGluc3RhbGwgZnV0dXJlcycpDQoNCg0KDQp0cnk6DQoNCiAgICBpbXBvcnQgYnM0DQoNCmV4Y2VwdCBJbXBvcnRFcnJvcjoNCg0KICAgIHByaW50KCdcbiBbw5ddIE1vZHVsIEJzNCBiZWx1bSB0ZXJpbnN0YWxsIS4uLlxuJykNCg0KICAgIG9zLnN5c3RlbSgncGlwIGluc3RhbGwgYnM0JykNCg0KDQoNCmltcG9ydCByZXF1ZXN0cywgb3MsIHJlLCBiczQsIHN5cywganNvbiwgdGltZSwgcmFuZG9tLCBkYXRldGltZSwgc3VicHJvY2Vzcw0KDQpmcm9tIGNvbmN1cnJlbnQuZnV0dXJlcyBpbXBvcnQgVGhyZWFkUG9vbEV4ZWN1dG9yIGFzIFlheWFuR2FudGVuZw0KDQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQ0KDQpmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cA0KDQpmcm9tIHJpY2ggaW1wb3J0IHByaW50IGFzIHByaW50cw0KDQpmcm9tIHJpY2gucGFuZWwgaW1wb3J0IFBhbmVsDQoNCmZyb20gcmljaC50cmVlIGltcG9ydCBUcmVlDQoNCmN0ID0gZGF0ZXRpbWUubm93KCkNCg0KbiA9IGN0Lm1vbnRoDQoNCmJ1bGFuID0gWydKYW51YXJpJywgJ0ZlYnJ1YXJpJywgJ01hcmV0JywgJ0FwcmlsJywgJ01laScsICdKdW5pJywgJ0p1bGknLCAnQWd1c3R1cycsICdTZXB0ZW1iZXInLCAnT2t0b2JlcicsICdOb3ZlbWJlcicsICdEZXNlbWJlciddDQoNCnRyeToNCg0KICAgIGlmIG4gPCAwIG9yIG4gPiAxMjoNCg0KICAgICAgICBleGl0KCkNCg0KICAgIG5UZW1wID0gbiAtIDENCg0KZXhjZXB0IFZhbHVlRXJyb3I6DQoNCiAgICBleGl0KCkNCg0KDQoNCmN1cnJlbnQgPSBkYXRldGltZS5ub3coKQ0KDQp0YSA9IGN1cnJlbnQueWVhcg0KDQpidSA9IGN1cnJlbnQubW9udGgNCg0KaGEgPSBjdXJyZW50LmRheQ0KDQpvcCA9IGJ1bGFuW25UZW1wXQ0KDQp3YWt0dSA9ICclcyAlcyAlcyclKGhhLG9wLHRhKQ0KDQp3YWt0dS5zcGxpdCgnLycpDQoNCiMjIyBXQVJOQSBSQU5ET00gIyMjDQoNClAgPSAnXHgxYlsxOzk3bScgIyBQVVRJSA0KDQpNID0gJ1x4MWJbMTs5MW0nICMgTUVSQUgNCg0KSCA9ICdceDFiWzE7OTJtJyAjIEhJSkFVDQoNCksgPSAnXHgxYlsxOzkzbScgIyBLVU5JTkcNCg0KQiA9ICdceDFiWzE7OTRtJyAjIEJJUlUNCg0KVSA9ICdceDFiWzE7OTVtJyAjIFVOR1UNCg0KTyA9ICdceDFiWzE7OTZtJyAjIEJJUlUgTVVEQQ0KDQpOID0gJ1x4MWJbMG0nICAgICMgV0FSTkEgTUFUSQ0KDQpBID0gJ1x4MWJbMTs5MG0nICMgV0FSTkEgQUJVIEFCVQ0KDQpCTiA9ICdceDFiWzE7MTA3bScgIyBCRUxBS0FORyBQVVRJSA0KDQpCQkwgPSAnXHgxYlsxOzEwNm0nICMgQkVMQUtBTkcgQklSVSBMQU5HSVQNCg0KQlAgPSAnXHgxYlsxOzEwNW0nICMgQkVMQUtBTkcgUElOSw0KDQpCQiA9ICdceDFiWzE7MTA0bScgIyBCRUxBS0FORyBCSVJVDQoNCkJLID0gJ1x4MWJbMTsxMDNtJyAjIEJFTEFLQU5HIEtVTklORw0KDQpCSCA9ICdceDFiWzE7MTAybScgIyBCRUxBS0FORyBISUpBVQ0KDQpCTSA9ICdceDFiWzE7MTAxbScgIyBCRUxBSkFORyBNRVJBSA0KDQpCQSA9ICdceDFiWzE7MTAwbScgIyBCRUxBS0FORyBBQlUgQUJVDQoNCm15X2NvbG9yID0gWw0KDQogUCwgTSwgSCwgSywgQiwgVSwgTywgTl0NCg0Kd2FybmEgPSByYW5kb20uY2hvaWNlKG15X2NvbG9yKQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIFJFU1BPTlNFIEZBQ0VCT09LICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KZGF0YSxkYXRhMj17fSx7fQ0KDQphbWFuLGNwLHNhbGFoPTAsMCwwDQoNCnViYWhQLHB3QmFydT1bXSxbXQ0KDQpBcGsgPSBbXQ0KDQpvayA9IFtdDQoNCmNwID0gW10NCg0KaWQgPSBbXQ0KDQp0b2tlbmt1ID0gW10NCg0KdXNlciA9IFtdDQoNCmxvb3AgPSAwDQoNCnVybF9sb29rdXAgPSAiaHR0cHM6Ly9sb29rdXAtaWQuY29tLyINCg0KdXJsX21iID0gImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSINCg0KdXJsX2lwID0gImh0dHBzOi8vd3d3Lmh0dHBiaW4ub3JnL2lwIg0KDQp1cmxfZ3JhcGggPSAiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20ve30iDQoNCmhlYWRlcl9ncnVwID0geyJ1c2VyLWFnZW50IjogIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA2LjAuMTsgU00tRzUzMk0pIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85OC4wLjQ3NTguODcgTW9iaWxlIFNhZmFyaS81MzcuMzYifQ0KDQpidWxhbl90dGwgPSB7IjAxIjogIkphbnVhcmkiLCAiMDIiOiAiRmVicnVhcmkiLCAiMDMiOiAiTWFyZXQiLCAiMDQiOiAiQXByaWwiLCAiMDUiOiAiTWVpIiwgIjA2IjogIkp1bmkiLCAiMDciOiAiSnVsaSIsICIwOCI6ICJBZ3VzdHVzIiwgIjA5IjogIlNlcHRlbWJlciIsICIxMCI6ICJPa3RvYmVyIiwgIjExIjogIk5vdmVtYmVyIiwgIjEyIjogIkRlc2VtYmVyIn0NCg0KI2FnZW4xID0gWydNb3ppbGxhLzUuMCAoWDExOyBMaW51eCBpNjg2KSBBcHBsZVdlYktpdC81MzQuMzAgKEtIVE1MLCBzZXBlcnRpIEdlY2tvKSBDaHJvbWUvMTIuMC43NDIuMTAwIFNhZmFyaS9FN0ZCQUYnXQ0KDQojYWdlbjIgPSBbJ01vemlsbGEvNS4wIChYMTE7IExpbnV4IHg4Nl82NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgc2VwZXJ0aSBHZWNrbykgQ2hyb21lLzYwLjAuMzExMi4xMDEgU2FmYXJpL0U3RkJBRiddDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KaGhoaCwgaWlpaSwgampqaiwga2trayA9ICJpbmRleC5waHA/IiwgIm5leHQ9aHR0cHMlM0ElMkYlMkZkZXZlbG9wZXJzLmZhY2Vib29rLmNvbSIsICIlMkZ0b29scyUyRmRlYnVnIiwgIiUyRmFjY2Vzc3Rva2VuJTJGIg0KDQpkZGRkLCBlZWVlLCBmZmZmLCBnZ2dnID0gImxvZ2luIiwgImRldmljZS1iYXNlZCIsICJ2YWxpZGF0ZS1wYXNzd29yZCIsICI/c2hibD0wIg0KDQphYWFhLCBiYmJiLCBjY2NjID0gInRvb2xzIiwgImRlYnVnIiwgImFjY2Vzc3Rva2VuIg0KDQojYmFoYXNhID0gImVuLUdCLGVuLVVTO3E9MC45LGVuO3E9MC44Ig0KDQpiYWhhc2EgPSAiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW4tVVMsZW47cT0wLjUiDQoNCiNiYWhhc2EgPSAiZW4tVVMsZW47cT0wLjksemgtQ047cT0wLjgsemg7cT0wLjcsaWQ7cT0wLjYsYnM7cT0wLjUiDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KIyMgUkFORE9NIFVBDQoNCiN1c2VyX2FnZW50PVsnTW96aWxsYS81LjAgKFgxMTsgTGludXggeDg2XzY0OyBydjoxMDEuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC8xMDEuMCcsJ01vemlsbGEvNS4wIChYMTE7IExpbnV4IHg4Nl82NDsgcnY6NzguMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC83OC4wJywnTW96aWxsYS81LjAgKFgxMTsgTGludXggeDg2XzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBzZXBlcnRpIEdlY2tvKSBDaHJvbWUvMTAyLjAuNTAwNS4xMzQgU2FmYXJpLzUzNy4zNiBPUFIvODguMC40NDEyLjUzJywnTW96aWxsYS81LjAgKFgxMTsgTGludXggeDg2XzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBzZXBlcnRpIEdlY2tvKSBDaHJvbWUvMTAxLjAuNDk1MS42NCBTYWZhcmkvNTM3LjM2IEVkZy8xMDEuMC4xMjEwLjUzJywnTW96aWxsYS81LjAgKGlQaG9uZTsgQ1BVIGlQaG9uZSBPUyAxNV81IHNlcGVydGkgTWFjIE9TIFgpIEFwcGxlV2ViS2l0LzYwNS4xLjE1IChLSFRNTCwgc2VwZXJ0aSBHZWNrbykgTW9iaWxlLzE1RTE0OCBJbnN0YWdyYW0gMjQyLjAuMC43LjExMCAoaVBob25lMTIsMTsgaU9TIDE1XzU7IGl0X0lUOyBpdC1JVDsgc2thbGEgPTIuMDA7IDgyOHgxNzkyOyAzODAzMjI5OTYpIEJCLzMnXQ0KDQp1YXNfYmF3YWFuID0gIk1vemlsbGEvNS4wIChpUGhvbmU7IENQVSBpUGhvbmUgT1MgMTVfNSBzZXBlcnRpIE1hYyBPUyBYKSBBcHBsZVdlYktpdC82MDUuMS4xNSAoS0hUTUwsIHNlcGVydGkgR2Vja28pIE1vYmlsZS8xNUUxNDggSW5zdGFncmFtIDI0Mi4wLjAuNy4xMTAgKGlQaG9uZTEyLDE7IGlPUyAxNV81OyBpdF9JVDsgaXQtSVQ7IHNrYWxhID0yLjAwOyA4Mjh4MTc5MjsgMzgwMzIyOTk2KSBCQi8zIg0KDQp1YXNfbm9raWFjMiA9ICJOb2tpYUMyLTAwLzIuMCAoMDMuNDUpIFByb2ZpbGUvTUlEUC0yLjEgQ29uZmlndXJhdGlvbi9DTERDLTEuMSBNb3ppbGxhLzUuMCAoSmF2YTsgVTsga2F1OyBub2tpYWMyLTAwKSBVQ0Jyb3dzZXI4LjMuMC4xNTQvNzAvMzUyL1VDV0VCIE1vYmlsZSINCg0KdWFzX25va2lheDIwID0gIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMjsgTm9raWEgWDIwIEJ1aWxkL1NLUTEuMjEwODIxLjAwMSkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgc2VwZXJ0aSBHZWNrbykgVmVyc2kvNC4wIENocm9tZS8xMDMuMC41MDYwLjcxIE1vYmlsZSBTYWZhcmkvNTM3LjM2IEdOZXdzIEFuZHJvaWQvMjAyMjA3NDUyNiINCg0KdWFzX25va2lheCA9ICJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTA7IE5va2lhIFN0cmVhbWluZyBCb3ggODAwMCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgc2VwZXJ0aSBHZWNrbykgQ2hyb21lLzg4LjAuNDMyNC4xNTIgTW9iaWxlIFNhZmFyaS81MzcuMzYiDQoNCnVhc19zYW1zdW5nc2UgPSAiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEyOyBTQU1TVU5HIFNNLUc3ODBHKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBTYW1zdW5nQnJvd3Nlci8xNi4wIENocm9tZS85Mi4wLjQ1MTUuMTY2IE1vYmlsZSBTYWZhcmkvNTM3LjM2Ig0KDQp1YXNfcmVkbWk5YSA9ICJNb3ppbGxhLzUuMCAoTGludXg7IFU7IEFuZHJvaWQgMTA7IGlkLWlkOyBSZWRtaSA5QSBCdWlsZC9RUDFBLjE5MDcxMS4wMjApIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS84OS4wLjQzODkuMTE2IE1vYmlsZSBTYWZhcmkvNTM3LjM2Ig0KDQp1YXNfbm9raWF4bCA9ICJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTI7IE5va2lhIFgyMCBCdWlsZC9TS1ExLjIxMDgyMS4wMDE7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBzZXBlcnRpIEdlY2tvKSBWZXJzaS80LjAgQ2hyb21lLzEwMy4wLjUwNjAuMTI5IE1vYmlsZSBTYWZhcmkvNTM3LjM2IFtGQl9JQUIvT3JjYS1BbmRyb2lkO0ZCQVYvMzcwLjAgLjAuMTQuMTA4O10iDQoNCiN1YXNfY2hyb21lbGludXggPSAiTW96aWxsYS81LjAgKFRpZGFrIGRpa2V0YWh1aTsgTGludXggeDg2XzY0KSBBcHBsZVdlYktpdC81MzQuMzQgKEtIVE1MLCBzZXBlcnRpIEdlY2tvKSBQaGFudG9tSlMvMS45LjggU2FmYXJpLzUzNC4zNCxNb3ppbGxhLzUuMCAoWDExOyBMaW51eCB4ODZfNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85Ny4wLjQ2OTIuNzEgU2FmYXJpLzUzNy4zNiINCg0KI3Vhc19qN3ByaW1lID0gIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA4LjEuMDsgU00tRzYxMEYgQnVpbGQvTTFBSlEpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83Mi4wLjM2MjYuMTIxIE1vYmlsZSBTYWZhcmkvNTM3LjM2IE9QUi81MS4xLjI0NjEuMTM3NTAxIg0KDQp1YXNfdGVzID0gIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMjsgTm9raWEgWDIwIEJ1aWxkL1NLUTEuMjEwODIxLjAwMTsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIHNlcGVydGkgR2Vja28pIFZlcnNpLzQuMCBDaHJvbWUvMTAzLjAuNTA2MC4xMjkgTW9iaWxlIFNhZmFyaS81MzcuMzYgW0ZCX0lBQi9PcmNhLUFuZHJvaWQ7RkJBVi8zNzAuMCAuMC4xNC4xMDg7XSINCg0KdWFzX3JhbmRvbSA9IHJhbmRvbS5jaG9pY2UoWyJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTI7IE5va2lhIFgyMCBCdWlsZC9TS1ExLjIxMDgyMS4wMDE7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBzZXBlcnRpIEdlY2tvKSBWZXJzaS80LjAgQ2hyb21lLzEwMy4wLjUwNjAuNzEgTW9iaWxlIFNhZmFyaS81MzcuMzYgSW5zdGFncmFtIDI0My4wLjAuMTYuMTExIEFuZHJvaWQgKDMxLyAxMjsgNDAwZHBpOyAxMDgweDIxNzk7IEhNRCBHbG9iYWwvTm9raWE7IE5va2lhIFgyMDsgUUtTX3Nwcm91dDsgcWNvbTsgZGVfREU7IDM4MjI5MDQ5OCJdKQ0KDQp1YXNfbm9raWFjMyA9ICJOb2tpYUMzLTAwLzUuMCAoMDguNjMpIFByb2ZpbGUvTUlEUC0yLjEgQ29uZmlndXJhdGlvbi9DTERDLTEuMSBNb3ppbGxhLzUuMCBBcHBsZVdlYktpdC80MjArIChLSFRNTCwgbGlrZSBHZWNrbykgU2FmYXJpLzQyMCsiDQoNCnVhc19pcGhvbmUgPSAiTW96aWxsYS81LjAgKFgxMTsgTGludXggeDg2XzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBzZXBlcnRpIEdlY2tvKSBIZWFkbGVzc0Nocm9tZS84MC4wLjM5ODcuMCBTYWZhcmkvNTM3LjM2Ig0KDQp1YXNfbm9raWE1cGx1cyA9ICJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTI7IE5va2lhIFgyMCBCdWlsZC9TS1ExLjIxMDgyMS4wMDE7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBzZXBlcnRpIEdlY2tvKSBWZXJzaS80LjAgQ2hyb21lLzk3LjAuNDY5Mi44NyBNb2JpbGUgU2FmYXJpLzUzNy4zNiBWaW5lYnJlIg0KDQp1YXNfcmFuZG9tMiA9IHJhbmRvbS5jaG9pY2UoWyJNb3ppbGxhLzUuMCAoWDExOyBMaW51eCB4ODZfNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIHNlcGVydGkgR2Vja28pIEhlYWRsZXNzQ2hyb21lLzgwLjAuMzk4Ny4wIFNhZmFyaS81MzcuMzYiLCJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgNC40LjQ7IGVuLWF1OyBTQU1TVU5HIFNNLU45MTVHIEJ1aWxkL0tUVTg0UCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLVEhNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi8yLjAgQ2hyb21lLzM0LjAuMTg0Ny43NiBNb2JpbGUgU2FmYXJpLzUzNy4zNiIsIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA0LjEuMjsgTm9raWFfWCBCdWlsZC9KWk81NEspIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8yNy4wLjg3LjkwIE1vYmlsZSBTYWZhcmkvNTM3LjM2IE5va2lhQnJvd3Nlci8xLjAsZ3ppcChnZmUpIiwiTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuNC4yOyB6aC1DTjsgSFVBV0VJIE1UNy1UTDAwIEJ1aWxkL0h1YXdlaU1UNy1UTDAwKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvNDAuMC4yMjE0Ljg5IFVDQnJvd3Nlci8xMS4zLjguOTA5IE1vYmlsZSBTYWZhcmkvNTM3LjM2IiwiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEwOyBNMjAwNkMzTUcpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS84MS4wLjQwNDQuMTM4IE1vYmlsZSBTYWZhcmkvNTM3LjM2IiwiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDcuMDsgU00tRzkzMFZDIEJ1aWxkL05SRDkwTTsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS81OC4wLjMwMjkuODMgTW9iaWxlIFNhZmFyaS81MzcuMzYiLCJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTI7IE5va2lhIFgyMCBCdWlsZC9TS1ExLjIxMDgyMS4wMDE7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBzZXBlcnRpIEdlY2tvKSBWZXJzaS80LjAgQ2hyb21lLzk3LjAuNDY5Mi44NyBNb2JpbGUgU2FmYXJpLzUzNy4zNiBWaW5lYnJlIiwiTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDUuMC4yOyBlbi11czsgUmVkbWkgTm90ZSAyIEJ1aWxkL0xSWDIyRykgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgc2VwZXJ0aSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OSBNb2JpbGUgU2FmYXJpLzUzNy4zNiBQSFgvNi4xIl0pDQoNCiMgbGVtcGFua2tra2tra2sNCg0KdWdlbjI9W10NCg0KdWdlbj1bXQ0KDQoNCg0KdHJ5Og0KDQogICAgcHJveD0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2FwaS5wcm94eXNjcmFwZS5jb20vdjIvP3JlcXVlc3Q9ZGlzcGxheXByb3hpZXMmcHJvdG9jb2w9c29ja3M0JnRpbWVvdXQ9MTAwMDAwJmNvdW50cnk9YWxsJnNzbD1hbGwmYW5vbnltaXR5PWFsbCcpLnRleHQNCg0KICAgIG9wZW4oJy5wcm94eS50eHQnLCd3Jykud3JpdGUocHJveCkNCg0KZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KDQogICAgZXhpdChlKQ0KDQoNCg0KZm9yIHhkIGluIHJhbmdlKDEwMDAwKToNCg0KICAgIGE9J01vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCA1LjAuMjsgZW4tdXM7IFJlZG1pIE5vdGUgMiBCdWlsZC9MUlgyMkcpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIHNlcGVydGkgR2Vja28pIENocm9tZS83MS4wLjM1NzguOTkgTW9iaWxlIFNhZmFyaS81MzcuMzYgUEhYLzYuMScNCg0KICAgIGI9cmFuZG9tLnJhbmRyYW5nZSgxLCA5KQ0KDQogICAgYz1yYW5kb20ucmFuZHJhbmdlKDEsIDkpDQoNCiAgICBkPSdNb3ppbGxhLzUuMCAoTGludXg7IE5ldENhc3Q7IFUpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIHNlcGVydGkgR2Vja28pIENocm9tZS83OS4wLjM5NDUuNzkgU2FmYXJpLzUzNy4zNiBTbWFydFRWLzEwLjAgQ29sdC8yLjAnDQoNCiAgICBlPXJhbmRvbS5yYW5kcmFuZ2UoMTAwLCA5OTk5KQ0KDQogICAgZj0nTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDg7IEhUQyBPbmUgRTkrKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBzZXBlcnRpIEdlY2tvKSBDaHJvbWUvOTguMC40Njc1LjU4IE1vYmlsZSBTYWZhcmkvNTM3LjM2Jw0KDQogICAgZz1yYW5kb20ucmFuZHJhbmdlKDEsIDkpDQoNCiAgICBoPXJhbmRvbS5yYW5kcmFuZ2UoMSwgNCkNCg0KICAgIGk9cmFuZG9tLnJhbmRyYW5nZSgxLCA0KQ0KDQogICAgaj1yYW5kb20ucmFuZHJhbmdlKDEsIDQpDQoNCiAgICBrPSdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgODsgSFRDIE9uZSBFOSspIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIHNlcGVydGkgR2Vja28pIENocm9tZS85OC4wLjQ2NzUuNTggTW9iaWxlIFNhZmFyaS81MzcuMzYnDQoNCiAgICB1YWt1PShmJ3thfXtifS57Y30ge2R9e2V9e2Z9e2d9LntofS57aX0ue2p9IHtrfScpDQoNCiAgICB1Z2VuMi5hcHBlbmQodWFrdSkNCg0KDQoNCg0KDQogICAgYWE9J01vemlsbGEvNS4wIChXaW5kb3dzIFBob25lIDguMTsgQVJNOyBUcmlkZW50LzguMDsgVG91Y2g7IHJ2OjExLjA7IFdlYkJyb3dzZXIvOC4xOyBJRU1vYmlsZS8xMS4wOyBNaWNyb3NvZnQ7IEx1bWlhIDk1MCBYTCkgc2VwZXJ0aSBHZWNrbyBVQ0Jyb3dzZXIvNC4yLjEuNTQxIE1vYmlsZScNCg0KICAgIGI9cmFuZG9tLmNob2ljZShbJzYnLCc3JywnOCcsJzknLCcxMCcsJzExJywnMTInXSkNCg0KICAgIGM9JyBNb3ppbGxhLzUuMCAoV2luZG93cyBQaG9uZSA4LjE7IEFSTTsgVHJpZGVudC84LjA7IFRvdWNoOyBydjoxMS4wOyBXZWJCcm93c2VyLzguMTsgSUVNb2JpbGUvMTEuMDsgTWljcm9zb2Z0OyBMdW1pYSA5NTAgWEwpIHNlcGVydGkgR2Vja28gVUNCcm93c2VyLzQuMi4xLjU0MSBNb2JpbGUnDQoNCiAgICBkPXJhbmRvbS5jaG9pY2UoWydBJywnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onLCAnSycsICdMJywgJ00nLCAnTicsICdPJywgJ1AnLCAnUScsICdSJywgJ1MnLCAnVCcsICdVJywgJ1YnLCAnVycsICdYJywgJ1knLCAnWiddKQ0KDQogICAgZT1yYW5kb20ucmFuZHJhbmdlKDEsIDk5OSkNCg0KICAgIGY9cmFuZG9tLmNob2ljZShbJ0EnLCdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSicsICdLJywgJ0wnLCAnTScsICdOJywgJ08nLCAnUCcsICdRJywgJ1InLCAnUycsICdUJywgJ1UnLCAnVicsICdXJywgJ1gnLCAnWScsICdaJ10pDQoNCiAgICBnPSdNb3ppbGxhLzUuMCAoV2luZG93cyBQaG9uZSA4LjE7IEFSTTsgVHJpZGVudC84LjA7IFRvdWNoOyBydjoxMS4wOyBXZWJCcm93c2VyLzguMTsgSUVNb2JpbGUvMTEuMDsgTWljcm9zb2Z0OyBMdW1pYSA5NTAgWEwpIHNlcGVydGkgR2Vja28gVUNCcm93c2VyLzQuMi4xLjU0MSBNb2JpbGUnDQoNCiAgICBoPXJhbmRvbS5yYW5kcmFuZ2UoNzMsMTAwKQ0KDQogICAgaT0nMCcNCg0KICAgIGo9cmFuZG9tLnJhbmRyYW5nZSg0MjAwLDQ5MDApDQoNCiAgICBrPXJhbmRvbS5yYW5kcmFuZ2UoNDAsMTUwKQ0KDQogICAgbD0nTW96aWxsYS81LjAgKFdpbmRvd3MgUGhvbmUgOC4xOyBBUk07IFRyaWRlbnQvOC4wOyBUb3VjaDsgcnY6MTEuMDsgV2ViQnJvd3Nlci84LjE7IElFTW9iaWxlLzExLjA7IE1pY3Jvc29mdDsgTHVtaWEgOTUwIFhMKSBzZXBlcnRpIEdlY2tvIFVDQnJvd3Nlci80LjIuMS41NDEgTW9iaWxlJw0KDQogICAgdWFrdTI9KGYne2FhfSB7Yn07IHtjfXtkfXtlfXtmfSkge2d9e2h9LntpfS57an0ue2t9IHtsfScpDQoNCiAgICB1Z2VuLmFwcGVuZCh1YWt1MikNCg0KICAgIA0KDQpkZWYgamFsYW4oeik6DQoNCiAgICBmb3IgZSBpbiB6ICsgJ1xuJzoNCg0KICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKGUpDQoNCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpDQoNCiAgICAgICAgdGltZS5zbGVlcCgwLjAzKQ0KDQogICAgIA0KDQoNCg0KICAgDQoNCiMtLS0tLS0tLSBMT0FESU5HIEFOSU1BU0kgLS0tLS0tLS0tLS0tDQoNCmRlZiBsb2FkaW5nKCk6DQoNCiAgICBhbmltYXRpb24gPSBbIltceDFiWzE7OTFt4pagXHgxYlswbeKWoeKWoeKWoeKWoeKWoeKWoeKWoeKWoeKWoV0iLCJbXHgxYlsxOzkybeKWoOKWoFx4MWJbMG3ilqHilqHilqHilqHilqHilqHilqHilqFdIiwgIltceDFiWzE7OTNt4pag4pag4pagXHgxYlswbeKWoeKWoeKWoeKWoeKWoeKWoeKWoV0iLCAiW1x4MWJbMTs5NG3ilqDilqDilqDilqBceDFiWzBt4pah4pah4pah4pah4pah4pahXSIsICJbXHgxYlsxOzk1beKWoOKWoOKWoOKWoOKWoFx4MWJbMG3ilqHilqHilqHilqHilqFdIiwgIltceDFiWzE7OTZt4pag4pag4pag4pag4pag4pagXHgxYlswbeKWoeKWoeKWoeKWoV0iLCAiW1x4MWJbMTs5N23ilqDilqDilqDilqDilqDilqDilqBceDFiWzBt4pah4pah4pahXSIsICJbXHgxYlsxOzk4beKWoOKWoOKWoOKWoOKWoOKWoOKWoOKWoFx4MWJbMG3ilqHilqFdIiwgIltceDFiWzE7OTlt4pag4pag4pag4pag4pag4pag4pag4pag4pagXHgxYlswbeKWoV0iLCAiW1x4MWJbMTs5MTBt4pag4pag4pag4pag4pag4pag4pag4pag4pag4pagXHgxYlswbV0iXQ0KDQogICAgZm9yIGkgaW4gcmFuZ2UoNTApOg0KDQogICAgICAgIHRpbWUuc2xlZXAoMC4xKQ0KDQogICAgICAgIHN5cy5zdGRvdXQud3JpdGUoZiJcciB7Tn1be0h94oCie059XSB7SH1Mb2FkaW5nLi4ue059ICIgKyBhbmltYXRpb25baSAlIGxlbihhbmltYXRpb24pXSArIlx4MWJbMG0gIikNCg0KICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkNCg0KICAgIHByaW50KCIiKQ0KDQojIExPR08NCg0KZGVmIGxvZ28oKToNCg0KICAgIHByaW50KGYiIiJ7TX0NCg0KIOKWiOKWiOKWiOKVlyAgIOKWiOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVlyDilojilojilojilojilojilZcNCg0KIOKWiOKWiOKWiOKWiOKVlyDilojilojilojilojilZHilojilojilZTilZDilZDilZDilZDilZ3ilZrilZDilZDilojilojilZTilZDilZDilZ3ilojilojilZTilZDilZDilojilojilZcNCg0KIOKWiOKWiOKVlOKWiOKWiOKWiOKWiOKVlOKWiOKWiOKVkeKWiOKWiOKWiOKWiOKWiOKVlyAgICAg4paI4paI4pWRICAg4paI4paI4paI4paI4paI4paI4paI4pWRDQoNCiDilojilojilZHilZrilojilojilZTilZ3ilojilojilZHilojilojilZTilZDilZDilZ0gICAgIOKWiOKWiOKVkSAgIOKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVkQ0KDQog4paI4paI4pWRIOKVmuKVkOKVnSDilojilojilZHilojilojilojilojilojilojilojilZcgICDilojilojilZEgICDilojilojilZEgIOKWiOKWiOKVkQ0KDQog4pWa4pWQ4pWdICAgICDilZrilZDilZ3ilZrilZDilZDilZDilZDilZDilZDilZ0gICDilZrilZDilZ0gICDilZrilZDilZ0gIOKVmuKVkOKVnVxue059IOKWjOKUguKWiOKVkeKWjOKVkeKWjOKVkU1FVEEgRkFDRUJPT0sgTUVUSE9E4pWR4paM4pWR4paM4pWR4paI4pSC4paMe059ICIiIikNCg0KICAgIHByaW50KCLilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZciKQ0KDQogICAgcHJpbnQoZiLilZF7UH1be0h94oCie1B9XSBBdXRob3IgICAgOiBSIE8gWSAgICAgICAgICAgICAgICAgICB7Tn3ilZEiKQ0KDQogICAgcHJpbnQoZiLilZF7UH1be0h94oCie1B9XSBXaGF0c2FwcCAgOiArNjAxMTYwNjEwODEyICAgICAgICAgICB7Tn3ilZEiKQ0KDQogICAgcHJpbnQoZiLilZF7UH1be0h94oCie1B9XSBHaXRodWIgICAgOiBnaXRodWIuY29tL1JPWS1JRC9tZXRhe059ICDilZEiKQ0KDQogICAgcHJpbnQoZiLilZF7UH1be0h94oCie1B9XSBTQyBTdGF0dXMgOiBHcmF0aXMgcmFzYSB7SH1QcmVtaXVte1B9ICAgICB7Tn3ilZEiKQ0KDQogICAgcHJpbnQoZiLilZF7UH1be0h94oCie1B9XSBTdXBwb3J0ICAgOiA2NGJpdCAgICAgICAgICAgICAgICAgICB7Tn3ilZEiKQ0KDQogICAgcHJpbnQoZiLilZF7UH1be0h94oCie1B9XSBOZXR3b3JrICAgOiB7SH1JTTN7Tn0sIHtIfUFYSVMvWEx7Tn0sIHtIfTN7Tn0gICAgICAgICDilZEiKQ0KDQogICAgcHJpbnQoZiLilZF7UH1be0h94oCie1B9XSBTQyBWZXJzaW9uOiBWLTUuNSAoe0t9QkVUQXtQfSkgICAgICAgICAgICB7Tn3ilZEiKQ0KDQogICAgcHJpbnQoIuKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnSIpDQoNCiNDUkFDSyBTRUxFU0FJDQoNCmRlZiBoYXNpbChvayxjcCk6DQoNCiAgICBpZiBsZW4ob2spICE9IDAgb3IgbGVuKGNwKSAhPSAwOg0KDQogICAgICAgIHByaW50KGYnXG4lc+KVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxuIFslc+KckyVzXSAlc0NSQUNLIEJZIFJPWSBNRVRBIFNDIFNFTEVTQUkuLi5cbiVz4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQJyUoTixILE4sSCxOKSkNCg0KICAgICAgICBwcmludChmJyAlc1slcyslc10gTnVtYmVyIG9mIEFjY291bnRzIE9LIDogJXMlcyVzJyUoTixILE4sSCxzdHIobGVuKG9rKSksTikpDQoNCiAgICAgICAgcHJpbnQoZicgWyVzKyVzXSBOdW1iZXIgb2YgQWNjb3VudHMgQ1AgOiAlcyVzJXMnJShLLE4sSyxzdHIobGVuKGNwKSksTikpDQoNCiAgICAgICAgY2VrX2NwID0gaW5wdXQoZiJ7Tn3ilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcbiBbe0t9P3tOfV0gU2hvdyBDUCBkZXRlY3RvciBvcHRpb25zIFt7SH1Ze059L3tNfXR7Tn1dOiAiKQ0KDQogICAgICAgIGlmIGNla19jcCA9PSIiOg0KDQogICAgICAgICAgICBwcmludChmIlxuIFt7TX0he059XSBEb24ndCBiZSBlbXB0eSIpO2hhc2lsKG9rLGNwKQ0KDQogICAgICAgIGVsaWYgY2VrX2NwIGluWyJZIiwieSJdOg0KDQogICAgICAgICAgICBqYWxhbihmIiB7Tn1be019IXtOfV0gUGxheSBhaXJwbGFuZW1vZGUgZmlyc3QiKTt0aW1lLnNsZWVwKDUpDQoNCiAgICAgICAgICAgIHd3PWlucHV0KGYiXG4ge059W3tLfT97Tn1dIENoYW5nZSBwYXNzd29yZCB3aGVuIHtCTX1UQVAgWUVTe059IFt7SH1Ze059L3tNfXR7Tn1dOiAiKQ0KDQogICAgICAgICAgICBpZiB3dyBpbiAoIlkiLCJ5IiwieWEiKToNCg0KICAgICAgICAgICAgICAgIHViYWhQLmFwcGVuZCgieSIpDQoNCiAgICAgICAgICAgICAgICBwcmludChmIiB7Tn1be0h94oCie059XSBQYXNzd29yZCBleGFtcGxlIDoge0h9YWRtaW4xMjN7Tn0iKQ0KDQogICAgICAgICAgICAgICAgcHdCYXI9aW5wdXQoZiIge059W3tLfT97Tn1dIEVudGVyIG5ldyBwYXNzd29yZCA6IHtIfSIpDQoNCiAgICAgICAgICAgICAgICAjcHJpbnQoIlxuIikNCg0KICAgICAgICAgICAgICAgIGlmIGxlbihwd0JhcikgPD0gNToNCg0KICAgICAgICAgICAgICAgICAgICBwcmludCgnXG4gJXNbJXPDlyVzXSBQYXNzd29yZCBtaW5pbXVtIDYgY2hhcmFjdGVycyclKE4sTSxOKSkNCg0KICAgICAgICAgICAgICAgIGVsc2U6DQoNCiAgICAgICAgICAgICAgICAgICAgcHdCYXJ1LmFwcGVuZChwd0JhcikNCg0KICAgICAgICAgICAgZm9yIG1lbWVrIGluIGNwOg0KDQogICAgICAgICAgICAgICAga29udG9sID0gbWVtZWsucmVwbGFjZSgnXG4nLCAnJykNCg0KICAgICAgICAgICAgICAgIHRpdGlkICA9IGtvbnRvbC5zcGxpdCgnIOKAoiAnKQ0KDQogICAgICAgICAgICAgICAgcHJpbnQoZid7Tn3ilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcbiB7SH1MT0dJTiBQUk9DRVNTJykNCg0KICAgICAgICAgICAgICAgIGphbGFuKGYnIHtOfVt7TX0/e059XSBBY2NvdW50IDoge0t9e2tvbnRvbC5yZXBsYWNlKCJbUk9ZLUNQXSAiLCAiIil9e059JykNCg0KICAgICAgICAgICAgICAgIHRyeToNCg0KICAgICAgICAgICAgICAgICAgICBsb2dfaGFzaWwodGl0aWRbMF0ucmVwbGFjZSgiW1JPWS1DUF0gIiwgIiIpLCB0aXRpZFsxXSkNCg0KICAgICAgICAgICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoNCg0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KDQogICAgICAgICAgICAgICAgICAgIHByaW50KCIiKQ0KDQogICAgICAgICAgICBwcmludCgiIikNCg0KICAgICAgICAgICAgamFsYW4oJyAlc1slc+KckyVzXSAlc0NoZWNraW5nIHByb2Nlc3MgaXMgY29tcGxldGUlcyclKE4sSCxOLEgsTikpDQoNCiAgICAgICAgICAgIGphbGFuKCcgJXNbJXPinJMlc10gUmV0cnVuIFNDIHR5cGUgIiVzcHl0aG9uIHJ1bi5weSVzIiclKE4sSCxOLEgsTikpO2V4aXQoKQ0KDQogICAgICAgIGVsaWYgY2VrX2NwIGluWyJUIiwidCJdOg0KDQogICAgICAgICAgICBqYWxhbihmIlxuIHtOfVt7SH3igKJ7Tn1dIHtOfU9rLCB0aGFuayB5b3UuIFJldHJ1biBTQyB0eXBlICd7SH1weXRob24gcnVuLnB5e059JyIpO2V4aXQoKQ0KDQogICAgICAgIGVsc2U6DQoNCiAgICAgICAgICAgIHByaW50KGYiXG4ge059W3tNfSF7Tn1dIENob29zZSBZL3QiKTtoYXNpbChvayxjcCkNCg0KICAgIGVsc2U6DQoNCiAgICAgICAgamFsYW4oJ1xuXG4gJXNbJXMhJXNdIFNvcnJ5IHlvdSBkaWRudCBnZXQgcmVzdWx0cyclKE4sTSxOKSk7ZXhpdCgpDQoNCiNMT0dJTiBTQw0KDQp1c2VyID0gIm1ldGEiDQoNCnB3YXMgPSAibWV0YXJveWlkIg0KDQpkZWYgY2VrX3B3KCk6DQoNCiAgICB0cnk6DQoNCiAgICAgICAgb3BlbigiLmluaV9wdy50eHQiLCAiciIpLnJlYWQoKQ0KDQogICAgZXhjZXB0IEZpbGVOb3RGb3VuZEVycm9yOg0KDQogICAgICAgIG9zLnN5c3RlbSgiY2xlYXIiKQ0KDQogICAgICAgIGxvZ28oKQ0KDQogICAgICAgIHByaW50KCcgWyVzISVzXSBQaWxpaCBub21lciAyIGppa2EgYWRhIHlhbmcgbWVtcGVyanVhbFxuIGJlbGlrYW4gU0MgTUVUQS4gU0MgaW5pICVzR1JBVElTJXMnJShNLE4sSCxOKSkNCg0KICAgICAgICBwcmludCgnXG4gJXMlc09QVElPTiBNRU5VJXMnJShCTSxQLE4pKQ0KDQogICAgICAgIHByaW50KCcgWyVzMSVzXSBBbHJlYWR5IGhhdmUgU0MgTG9naW4gSW5mbyclKEgsTikpDQoNCiAgICAgICAgcHJpbnQoJyBbJXMyJXNdIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSBBdXRob3InJShILE4pKQ0KDQogICAgICAgIHBpbCA9IGlucHV0KCdcbiAlc1slcz8lc10gQ2hvaWNlIDogJyUoTixLLE4pKQ0KDQogICAgICAgIGlmIHBpbCA9PSIiOg0KDQogICAgICAgICAgICBqYWxhbihmIiB7Tn1be019w5d7Tn1dIFNvcnJ5LCBpdCBpcyB3cm9uZy4uLiEiKTt0aW1lLnNsZWVwKDEpO2Nla19wdygpDQoNCiAgICAgICAgZWxpZiBwaWwgaW5bIjIiLCIwMiJdOg0KDQogICAgICAgICAgICBqYWxhbigiXG4gJXNbJXPigKIlc10gJXNZb3Ugd2lsbCBiZSByZWRpcmVjdGVkIHRvIHRoZSBBdXRob3IgV2hhdHNhcHAuLi4iJShOLEgsTixIKSk7dGltZS5zbGVlcCgwLjAyKQ0KDQogICAgICAgICAgICBvcy5zeXN0ZW0oJ3hkZy1vcGVuIGh0dHBzOi8vd2EubWUvNjAxMTYwNjEwODEyP3RleHQ9SGFsbG8raXppbittZW5nZ3VuYWthbitTQytpbmknKTt0aW1lLnNsZWVwKDIpO2Nla19wdygpDQoNCiAgICAgICAgZWxpZiBwaWwgaW5bIjEiLCIwMSJdOg0KDQogICAgICAgICAgICBwcmludCgnJXPilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAnJShOKSkNCg0KICAgICAgICAgICAgcHJpbnQoJyAlc1slcyElc10gWW91IG11c3QgaGF2ZSBhICVzdXNlcm5hbWUgJiBwYXNzd29yZCVzIHRvXG4gY29udGludWUgd2l0aCB0aGlzIHRvb2whJyUoTixNLE4sSCxOKSkNCg0KICAgICAgICBlbHNlOg0KDQogICAgICAgICAgICBleGl0KGYie059W3tNfcOXe059XSBTb3JyeSwgaXQgaXMgd3JvbmcuLi4hIikNCg0KICAgICAgICAjcHJpbnQoIiAlc1slcyElc10gWW91IG11c3QgaGF2ZSBhICVzdXNlcm5hbWUgJiBwYXNzd29yZCVzIHRvIGNvbnRpbnVlIHdpdGggdGhpcyB0b29sISIlKE4sTSxOLEssTikpDQoNCiAgICAgICAgcHcgPSBpbnB1dCgiXG4gJXNbJXM/JXNdIEVudGVyIFVzZXJuYW1lIDogJXMiJShOLEssTixIKSkNCg0KICAgICAgICBsb2FkaW5nKCkNCg0KICAgICAgICBpZiBwdyBpbiBbIiJdOg0KDQogICAgICAgICAgICBqYWxhbigiICVzWyVzISVzXSBTb3JyeSBkb24ndCBiZSBibGFuayEiJShOLE0sTikpO3RpbWUuc2xlZXAoMSk7Y2VrX3B3KCkNCg0KICAgICAgICBlbGlmIHB3IGluIHVzZXI6DQoNCiAgICAgICAgICAgIGphbGFuKCIgJXNbJXPinJMlc10gT0sgVXNlcm5hbWUgaXMgY29ycmVjdCIlKE4sSCxOKSk7dGltZS5zbGVlcCgxKTtrc2thKCkNCg0KICAgICAgICBlbHNlOg0KDQogICAgICAgICAgICBqYWxhbigiICVzWyVzISVzXSBTb3JyeSwgd3JvbmcgdXNlcm5hbWUiJShOLE0sTikpO3RpbWUuc2xlZXAoMSk7Y2VrX3B3KCkNCg0KICAgIG1vY2hfeWF5YW4oKQ0KDQpkZWYga3NrYSgpOg0KDQogICAgeHggPSBpbnB1dCgiXG4gJXNbJXM/JXNdIEVudGVyIFBhc3N3b3JkIDogJXMiJShOLEssTixIKSkNCg0KICAgIGxvYWRpbmcoKQ0KDQogICAgaWYgeHggaW5bIiJdOg0KDQogICAgICAgIGphbGFuKCIgJXNbJXMhJXNdIFNvcnJ5IGRvbid0IGJlIGJsYW5rISIlKE4sTSxOKSk7dGltZS5zbGVlcCgxKTtjZWtfcHcoKQ0KDQogICAgZWxpZiB4eCBpbiBwd2FzOg0KDQogICAgICAgIGphbGFuKCIgJXNbJXPinJMlc10gT0sgUGFzc3dvcmQgaXMgY29ycmVjdCIlKE4sSCxOKSk7dGltZS5zbGVlcCgyKTtvcGVuKCIuaW5pX3B3LnR4dCIsICJhIikud3JpdGUoeHgpO21vY2hfeWF5YW4oKQ0KDQogICAgZWxzZToNCg0KICAgICAgICBqYWxhbigiICVzWyVzISVzXSBTb3JyeSwgd3JvbmcgUGFzc3dvcmQiJShOLE0sTikpO3RpbWUuc2xlZXAoMSk7Y2VrX3B3KCkNCg0KDQoNCiNNRVRPREUgTE9HSU4NCg0KZGVmIHlheWFueGQoKToNCg0KICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KDQogICAgdHJ5Og0KDQogICAgCV9fX2tvbnRvbF9fXyA9IGlucHV0KCdbfF0gTWFzdWtrYW4gQ29va2llcyA6ICcpDQoNCiAgICAJZGF0YSA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9idXNpbmVzcy5mYWNlYm9vay5jb20vYnVzaW5lc3NfbG9jYXRpb25zIiwgaGVhZGVycyA9IHsidXNlci1hZ2VudCI6ICJNb3ppbGxhLzUuMCAoTGludXg7IFU7IEFuZHJvaWQgNC4xLjE7IGVuLWdiOyBHVC1TNTMwMCBCdWlsZC9HSU5HRVJCUkVBRClNYXh0aG9uIEFwcGxlV2ViS2l0LzUzMy4xIChLSFRNTCwgc2VwZXJ0aSBHZWNrbykgVmVyc2kvNC4wIE1vYmlsZSBTYWZhcmkvNTMzLjEiLCJyZWZlcmVyIjogImh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS8iLCJob3N0IjogImJ1c2luZXNzLmZhY2Vib29rLmNvbSIsIm9yaWdpbiI6ICJodHRwczovL2J1c2luZXNzLmZhY2Vib29rLmNvbSIsInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiIDogIjEiLCJhY2NlcHQtbGFuZ3VhZ2UiOiAiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjciLCJjYWNoZS1jb250cm9sIjogIm1heC1hZ2U9MCIsImFjY2VwdCI6InRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqW2luc2VydGVkIGJ5IGN5dGhvbiB0byBhdm9pZCBjb21tZW50IGNsb3Nlcl0vW2luc2VydGVkIGJ5IGN5dGhvbiB0byBhdm9pZCBjb21tZW50IHN0YXJ0XSo7cT0wLjgiLCJjb250ZW50LXR5cGUiOiJ0ZXh0L2h0bWw7IGNoYXJzZXQ9dXRmLTgifSwgY29va2llcyA9IHsiY29va2llIjpfX19rb250b2xfX199KQ0KDQogICAgCWZpbmRfdG9rZW4gPSByZS5zZWFyY2goIihFQUFHXHcrKSIsIGRhdGEudGV4dCkNCg0KICAgIAlrZW49b3BlbigiLnRva2VuLnR4dCIsICJ3Iikud3JpdGUoZmluZF90b2tlbi5ncm91cCgxKSkNCg0KICAgIAljb2s9b3BlbigiLmNva2llLnR4dCIsICJ3Iikud3JpdGUoX19fa29udG9sX19fKQ0KDQogICAgCXByaW50KCdcbiBMT0dJTiBTVUNDRVNTRlVMTFknKQ0KDQogICAgCWV4aXQoKQ0KDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KDQogICAgCW9zLnN5c3RlbSgicm0gLWYgLnRva2VuLnR4dCIpDQoNCiAgICAJb3Muc3lzdGVtKCJybSAtZiAuY29raWUudHh0IikNCg0KICAgIAlwcmludCgnaW52YWxpZCcpDQoNCiAgICAJZXhpdCgpDQoNCiMgLS0tLS0tLSBMT0dJTiBDT09LSUUgLS0tLS0tLS0NCg0KZGVmIGxvZ2luKCk6DQoNCgl0cnk6DQoNCgkJdG9rZW4gPSBvcGVuKCcudG9rZW4udHh0JywncicpLnJlYWQoKQ0KDQoJCWt1a2lzID0gb3BlbignLmNva2llLnR4dCcsJ3InKS5yZWFkKCkNCg0KCQl0b2tlbmt1LmFwcGVuZCh0b2tlbikNCg0KCQl0cnk6DQoNCgkJCXN5ID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZT9maWVsZHM9aWQsbmFtZSZhY2Nlc3NfdG9rZW49Jyt0b2tlbmt1WzBdLCBjb29raWVzPXsnY29va2llJzprdWtpc30pDQoNCgkJCXN5MiA9IGpzb24ubG9hZHMoc3kudGV4dClbJ25hbWUnXQ0KDQoJCQlzeTMgPSBqc29uLmxvYWRzKHN5LnRleHQpWydpZCddDQoNCgkJCW1vY2hfeWF5YW4oc3kyLHN5MykNCg0KCQlleGNlcHQgS2V5RXJyb3I6DQoNCgkJCXlheWFueGQoKQ0KDQoJCWV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoNCg0KCQkJCXlheWFueGQoKQ0KDQoJZXhjZXB0IElPRXJyb3I6DQoNCgkJCXlheWFueGQoKQ0KDQojTE9HSU4gUEFTU1dPUkQNCg0KDQoNCiAgICANCg0KZGVmIG1vY2hfeWF5YW4obXlfbmFtZSxteV9pZCk6DQoNCiAgICBpcG0gPSByZXF1ZXN0cy5nZXQodXJsX2lwKS5qc29uKCkNCg0KICAgIElQID0gaXBtWyJvcmlnaW4iXQ0KDQogICAgcHJpbnQoZiJ7SH0gW3tIffCfpJZ7SH1dIElOSSBOQU1BIFRVTUJBTCBMVSAgOiB7bXlfbmFtZX0iKQ0KDQogICANCg0KICAgIHByaW50KCIlc+KVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkCIlKE4pKQ0KDQogICAgcHJpbnQoZiIge0J9T1BUSU9OIE1FTlV7Qn0iKQ0KDQogDQoNCiAgICBwcmludCgnICVzMDElczpQdWJsaWMgRnJpZW5kcyAoJXNPTiVzKSclKEgsSCxILEgpKTt0aW1lLnNsZWVwKDAuMDMpDQoNCiAgICBwcmludCgnICVzMDIlczpSYW5kb20gSUQgTWFzc2FsICglc09GJXMpJyUoTSxNLE0sTSkpO3RpbWUuc2xlZXAoMC4wMykNCg0KICAgIHByaW50KCcgJXMwMyVzOlB1YmxpYyBHcm91cCBNZW1iZXIgKCVzT04lcyknJShILEgsSCxIKSk7dGltZS5zbGVlcCgwLjAzKQ0KDQogICAgcHJpbnQoJyAlczA0JXM6TGlrZSBQb3N0cyAoJXNPTiVzKSclKEgsSCxILEgpKTt0aW1lLnNsZWVwKDAuMDMpDQoNCiAgICBwcmludCgnICVzMDUlczpDb21tZW50IFBvc3RzICglc09OJXMpJyUoSCxILEgsSCkpO3RpbWUuc2xlZXAoMC4wMykNCg0KICAgIHByaW50KCc6JXMwNiVzOkNoZWNrcG9pbnQgRGV0ZWR0b3IgKCVzT04lcyknJShILEgsSCxIKSk7dGltZS5zbGVlcCgwLjAzKQ0KDQogICAgcHJpbnQoJyAlczA3JXM6Q2hlY2sgQ3JhY2sgUmVzdWx0cyAoJXNPTiVzKSclKEgsSCxILEgpKTt0aW1lLnNsZWVwKDAuMDMpDQoNCiAgICBwZXBlayA9IGlucHV0KCdcbiAlc1slcz8lc10gcGlsaWggMCBzYW1wYWkgNzogJyUoTixLLE4pKQ0KDQogICAgaWYgcGVwZWsgPT0gJyc6DQoNCiAgICAgICAgamFsYW4oJ1xuICVzWyVzw5clc10gU29ycnkgdGhlIG1lbnUgc2VsZWN0aW9uIGlzIHdyb25nLi4uISclKE4sTSxOKSk7dGltZS5zbGVlcCgyKTttb2NoX3lheWFuKCkNCg0KIyMjIyMjIENSQUNLIElEIFBVQkxJSyBTSU5HRUwgIyMjIyMNCg0KICAgIGVsaWYgcGVwZWsgaW5bJzEnLCcwMSddOg0KDQogICAgICAgIHRyeToNCg0KICAgICAgICAJdG9rZW4gPSBvcGVuKCcudG9rZW4udHh0JywncicpLnJlYWQoKQ0KDQogICAgICAgIAlrdWtpcyA9IG9wZW4oJy5jb2tpZS50eHQnLCdyJykucmVhZCgpDQoNCiAgICAgICAgZXhjZXB0IElPRXJyb3I6DQoNCiAgICAgICAgCWV4aXQoKSAgICAgICAgDQoNCiAgICAgICAgcGlsID0gaW5wdXQoIk1BU1VLQU4gSUQgVEFSR0VU8J+SgCA6IikNCg0KICAgICAgICB0cnk6DQoNCiAgICAgICAgCWtvaDIgPSBvcGVuKCcvc2RjYXJkL1BLRy50eHQnLCdhKycpDQoNCiAgICAgICAgCWZvciBwaSBpbiByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3YxLjAvJytwaWwrJz9maWVsZHM9ZnJpZW5kcy5saW1pdCg1MDAwKSZhY2Nlc3NfdG9rZW49Jyt0b2tlbmt1WzBdLGNvb2tpZXM9eydjb29raWUnOiBrdWtpc30pLmpzb24oKVsnZnJpZW5kcyddWydkYXRhJ106DQoNCiAgICAgICAgICAgICAgICAJCXVpZCA9IHBpWyJpZCJdDQoNCiAgICAgICAgICAgICAgICAJCW5hbWEgPSBwaVsibmFtZSJdDQoNCiAgICAgICAgICAgICAgICAJCWlkLmFwcGVuZChwaVsnaWQnXSsnPD0+JytwaVsnbmFtZSddKQ0KDQogICAgICAgICAgICAgICAgCQlrb2gyLmNsb3NlKCkNCg0KICAgICAgICBleGNlcHQgS2V5RXJyb3I6DQoNCiAgICAgICAgICAgIGphbGFuKGYnICVzWyVzw5clc10gU29ycnkgJXNJRCBpcyBub3QgcHVibGljL0ludmFsaWQgdG9rZW4lcyclKE4sTSxOLE0sTikpO3RpbWUuc2xlZXAoMSk7bG9naW4oKQ0KDQojIyMjIyMgQ1JBQ0sgUkFORE9NIElEIE1BU1NBTCAjIyMjIw0KDQogICAgZWxpZiBwZXBlayBpblsnMicsJzAyJ106ICAgICAgICANCg0KICAgICAgICBfbmdvY29rXyh0b2tlbnopDQoNCiMjIyMjIyBDUkFDSyBHUlVQICMjIyMjDQoNCiAgICBlbGlmIHBlcGVrIGluWyczJywnMDMnXToNCg0KICAgICAgICAgICAgcHJpbnQoIiVz4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4gJXNHUk9VUCBUQVJHRVQgSU5GTyVzIiUoTixCTSxOKSkNCg0KICAgICAgICAgICAga29udG9sID0gaW5wdXQoZiIge059W3tLfT97Tn1dIEVudGVyIEdyb3VwIElEIDoge0h9IikNCg0KICAgICAgICAgICAgaWYga29udG9sIGluWyIiLCIgIl06DQoNCiAgICAgICAgICAgICAgICBwcmludCgnXG4gJXNbJXPDlyVzXSBEb250IGJlIGVtcHR5Li4uISclKE4sTSxOKSk7dGltZS5zbGVlcCgyKTttb2NoX3lheWFuKCkNCg0KICAgICAgICAgICAgZWxzZToNCg0KICAgICAgICAgICAgICAgIHRyeToNCg0KICAgICAgICAgICAgICAgICAgICBjb29raXogPSBvcGVuKCcuY29raWUudHh0JykucmVhZCgpDQoNCiAgICAgICAgICAgICAgICAgICAga3VlaCAgPSB7ImNvb2tpZSI6Y29va2l6fQ0KDQogICAgICAgICAgICAgICAgZXhjZXB0IElPRXJyb3I6DQoNCiAgICAgICAgICAgICAgICAgICAgamFsYW4oZiJcbiBbe019w5d7Tn1dIFlvdSBsb2dpbiB1c2luZyBhIHRva2VuLCBpZiB5b3Ugd2FudCB0byBjcmFjayBmcm9tIGEgZ3JvdXAgbWVtYmVyLCBwbGVhc2UgbG9naW4gY29va2llcyBmaXJzdCIpO3RpbWUuc2xlZXAoNSk7b3Muc3lzdGVtKCdybSAtcmYgLnRva2VuLnR4dCcpO3lheWFueGQoKQ0KDQogICAgICAgICAgICAgICAgdHJ5Og0KDQogICAgICAgICAgICAgICAgICAgIGEgPSByZXF1ZXN0cy5nZXQoZiJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9ncm91cC8/aWQ9e2tvbnRvbH0mYWNjZXNzX3Rva2VuPXt0b2tlbnp9IikuanNvbigpWyJuYW1lIl0NCg0KICAgICAgICAgICAgICAgICAgICBpZiAiSGFsYW1hbiBUaWRhayBEaXRlbXVrYW4iIGluIGE6DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGYiXG4gJXNbJXPDlyVzXSBHcm91cCB3aXRoIElEIHtrb250b2x9IG5vdCBmb3VuZCIlKE4sTSxOKSk7dGltZS5zbGVlcCgyKTttb2NoX3lheWFuKCkNCg0KICAgICAgICAgICAgICAgICAgICBlbGlmICJBbmRhIFRpZGFrIERhcGF0IE1lbmdndW5ha2FuIEZpdHVyIEluaSBTZWthcmFuZyIgaW4gYToNCg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlxuICVzWyVzw5clc10gRmFjZWJvb2sgcmVzdHJpY3RzIGV2ZXJ5IGFjdGl2aXR5LCBhY2NvdW50IGlzIHNwYW1tZWQsIHBsZWFzZSBzd2l0Y2ggYWNjb3VudHMiJShOLE0sTikpO3RpbWUuc2xlZXAoMik7bW9jaF95YXlhbigpDQoNCiAgICAgICAgICAgICAgICAgICAgZWxpZiAiS29udGVuIFRpZGFrIERpdGVtdWthbiIgaW4gYToNCg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiJcbiAlc1slc8OXJXNdIEdyb3VwIHdpdGggSUQge2tvbnRvbH0gbm90IGZvdW5kIiUoTixNLE4pKTt0aW1lLnNsZWVwKDIpO21vY2hfeWF5YW4oKQ0KDQogICAgICAgICAgICAgICAgICAgIGVsc2U6ICAgICAgICAgICAgICAgICAgICANCg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiIge059W3tIfeKAontOfV0gR3JvdXAgTmFtZSA6IHtIfXthfSIpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGYiXG4ge059W3tNfSF7Tn1dIFRvIHN0b3Age0h9Q1RSTCtje059IG9uIGtleWJvYXJkIikNCg0KICAgICAgICAgICAgICAgICAgICAgICAgY3JhY2tfZ3J1cChmImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9icm93c2UvZ3JvdXAvbWVtYmVycy8/aWQ9e2tvbnRvbH0iLCBrdWVoKQ0KDQogICAgICAgICAgICAgICAgZXhjZXB0KHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yLHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ2h1bmtlZEVuY29kaW5nRXJyb3IscmVxdWVzdHMuZXhjZXB0aW9ucy5SZWFkVGltZW91dCk6DQoNCiAgICAgICAgICAgICAgICAgICAgZXhpdCgiXG4gWyFdIFNvcnJ5IG5vIGNvbm5lY3Rpb24iKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQoNCiMjIyMjIyBDUkFDSyBMSUtFIFBPU1RJTkdBTiAjIyMjIw0KDQogICAgZWxpZiBwZXBlayBpblsnNCcsJzA0J106DQoNCiAgICAgICAgICAgIHByaW50KCIlc+KVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxuICVzTElLRSBUQVJHRVQgSU5GTyVzIiUoTixCTSxOKSkNCg0KICAgICAgICAgICAga29udG9sID0gaW5wdXQoZiIge059W3tLfT97Tn1dIEVudGVyIFBvc3QgSUQgOiB7SH0iKQ0KDQogICAgICAgICAgICBpZiBrb250b2wgaW5bIiIsIiAiXToNCg0KICAgICAgICAgICAgICAgIHByaW50KCdcbiAlc1slc8OXJXNdIERvbnQgYmUgZW1wdHkuLi4hJyUoTixNLE4pKTt0aW1lLnNsZWVwKDIpO21vY2hfeWF5YW4oKQ0KDQogICAgICAgICAgICB0cnk6DQoNCiAgICAgICAgICAgICAgICBjb29raXogPSBvcGVuKCcuY29raWUudHh0JykucmVhZCgpDQoNCiAgICAgICAgICAgICAgICBrdWVoICA9IHsiY29va2llIjpjb29raXp9DQoNCiAgICAgICAgICAgIGV4Y2VwdCBJT0Vycm9yOg0KDQogICAgICAgICAgICAgICAgamFsYW4oZiJcbiB7Tn1be019w5d7Tn1dIFlvdSBsb2dpbiB1c2luZyBhIHRva2VuLCBpZiB5b3Ugd2FudCB0byBjcmFjayBmcm9tIGEgZ3JvdXAgbWVtYmVyLCBwbGVhc2UgbG9naW4gY29va2llcyBmaXJzdCIpO3RpbWUuc2xlZXAoNSk7b3Muc3lzdGVtKCdybSAtcmYgLnRva2VuLnR4dCcpO3lheWFueGQoKQ0KDQogICAgICAgICAgICB0cnk6DQoNCiAgICAgICAgICAgICAgICBwcmludChmIlxuIHtOfVt7TX0he059XSBUbyBzdG9wIHtIfUNUUkwrY3tOfSBvbiBrZXlib2FyZCIpDQoNCiAgICAgICAgICAgICAgICBsaWtlX3Bvc3QoZiJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vdWZpL3JlYWN0aW9uL3Byb2ZpbGUvYnJvd3Nlci8/ZnRfZW50X2lkZW50aWZpZXI9e2tvbnRvbH0iLCBrdWVoKQ0KDQogICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6DQoNCiAgICAgICAgICAgICAgICBwcmludChmIlxuIFshXSBQb3N0IHdpdGggSUQge2tvbnRvbH0gbm90IGZvdW5kIik7dGltZS5zbGVlcCgyKTttb2NoX3lheWFuKCkNCg0KIyMjIyMjIENSQUNLIEtPTUVOVEFSICMjIyMjDQoNCiAgICBlbGlmIHBlcGVrIGluWyc1JywnMDUnXToNCg0KICAgICAgICAgICAgcHJpbnQoIiVz4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4gJXNDT01NRU5UIFRBUkdFVCBJTkZPJXMiJShOLEJNLE4pKQ0KDQogICAgICAgICAgICBrb250b2wgPSBpbnB1dChmIlxuIHtOfVt7S30/e059XSBFbnRlciBQb3N0IElEIDoge0h9IikNCg0KICAgICAgICAgICAgaWYga29udG9sIGluWyIiLCIgIl06DQoNCiAgICAgICAgICAgICAgICBwcmludCgnXG4gJXNbJXPDlyVzXSBEb250IGJlIGVtcHR5Li4uISclKE4sTSxOKSk7dGltZS5zbGVlcCgyKTttb2NoX3lheWFuKCkNCg0KICAgICAgICAgICAgdHJ5Og0KDQogICAgICAgICAgICAgICAgY29va2l6ID0gb3BlbignLmNva2llLnR4dCcpLnJlYWQoKQ0KDQogICAgICAgICAgICAgICAga3VlaCAgPSB7ImNvb2tpZSI6Y29va2l6fQ0KDQogICAgICAgICAgICBleGNlcHQgSU9FcnJvcjoNCg0KICAgICAgICAgICAgICAgIGphbGFuKGYiXG4ge059W3tNfcOXe059XSBZb3UgbG9naW4gdXNpbmcgYSB0b2tlbiwgaWYgeW91IHdhbnQgdG8gY3JhY2sgZnJvbSBhIGdyb3VwIG1lbWJlciwgcGxlYXNlIGxvZ2luIGNvb2tpZXMgZmlyc3QiKTt0aW1lLnNsZWVwKDUpO29zLnN5c3RlbSgncm0gLXJmIC50b2tlbi50eHQnKTt5YXlhbnhkKCkNCg0KICAgICAgICAgICAgdHJ5Og0KDQogICAgICAgICAgICAgICAgcHJpbnQoZiJcbiB7Tn1be019IXtOfV0gVG8gc3RvcCB7SH1DVFJMK2N7Tn0gb24ga2V5Ym9hcmQiKQ0KDQogICAgICAgICAgICAgICAgbmdvbWVuX3Bvc3QoZiJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20ve2tvbnRvbH0iLCBrdWVoKQ0KDQogICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6DQoNCiAgICAgICAgICAgICAgICBwcmludChmIlxuIFshXSBQb3N0IHdpdGggSUQge2tvbnRvbH0gbm90IGZvdW5kIik7dGltZS5zbGVlcCgyKTttb2NoX3lheWFuKCkNCg0KIyMjIyMjIENIRUNLUE9JTlQgREVURURUT1IgIyMjIyMNCg0KICAgIGVsaWYgcGVwZWsgaW5bJzYnLCcwNiddOg0KDQogICAgICAgIGdhYnV0KCkNCg0KIyMjIyMjIENFSyBIQVNJTCBDUkFDSyAjIyMjIw0KDQogICAgZWxpZiBwZXBlayBpblsnNycsJzA3J106DQoNCiAgICAgICAgZGlycyA9IG9zLmxpc3RkaXIoInJlc3VsdHMiKQ0KDQogICAgICAgIHByaW50KCclc+KVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxuICVzRklMRSBIQVNJTCBDUkFDSyVzJyUoTixCTSxOKSkNCg0KICAgICAgICBmb3IgZmlsZSBpbiBkaXJzOg0KDQogICAgICAgICAgICBwcmludCgiICVzWyVzKyVzXSAlcyIlKE4sSCxOLGZpbGUpKQ0KDQogICAgICAgIGZpbGUgPSBpbnB1dCgiXG4gJXMlc0ZJTEUgREVUQUlMUyVzXG4gWyVzPyVzXSBGaWxlIG5hbWUgOiAlcyIlKEJNLFAsTixLLE4sSCkpDQoNCiAgICAgICAgaWYgZmlsZSA9PSAiIjoNCg0KICAgICAgICAgICAgZmlsZSA9IGlucHV0KCJcbiAlcyVzRklMRSBERVRBSUxTJXNcbiBbJXM/JXNdIEZpbGUgbmFtZSA6JXMiJShCTSxQLE4sSyxOLEgpKQ0KDQogICAgICAgIHRvdGFsID0gb3BlbigicmVzdWx0cy8lcyIlKGZpbGUpKS5yZWFkKCkuc3BsaXRsaW5lcygpDQoNCiAgICAgICAgI3ByaW50KCIlc+KVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkCIlKE4pKTt0aW1lLnNsZWVwKDIpDQoNCiAgICAgICAgbm1fZmlsZSA9ICgiJXMiJShmaWxlKSkucmVwbGFjZSgiLSIsICIgIikNCg0KICAgICAgICBocHNfbm0gID0gbm1fZmlsZS5yZXBsYWNlKCIudHh0IiwgIiIpLnJlcGxhY2UoIk9LIiwgIiIpLnJlcGxhY2UoIkNQIiwgIiIpLnJlcGxhY2UoImNwX2RldGVrdG9yIiwgIiIpLnJlcGxhY2UoImludmFsaWRfb2siLCAiIikNCg0KICAgICAgICBqYWxhbigiICVzWyVz4oCiJXNdIEZpbGUgZGF0ZSA6JXMlc1xuICVzWyVz4oCiJXNdIFRvdGFsIDogJXMlcyVzIiUoTixILE4sSCxocHNfbm0sTixILE4sSCxsZW4odG90YWwpLE4pKQ0KDQogICAgICAgIHByaW50KCIlc+KVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkCIlKE4pKTt0aW1lLnNsZWVwKDIpDQoNCiAgICAgICAgZm9yIG1lbWVrIGluIHRvdGFsOg0KDQogICAgICAgICAgICBrb250b2wgPSBtZW1lay5yZXBsYWNlKCJcbiIsIiIpDQoNCiAgICAgICAgICAgIHRpdGlkICA9IGtvbnRvbC5yZXBsYWNlKCJbUk9ZLU9LXSAiLCJceDFiWzE7OTJtW1JPWS1PS10gIikucmVwbGFjZSgiW1JPWS1DUF0gIiwgIlx4MWJbMTs5M21bUk9ZLUNQXSAiKQ0KDQogICAgICAgICAgICBwcmludCgiJXMlcyIlKHRpdGlkLE4pKTt0aW1lLnNsZWVwKDAuMDMpDQoNCiAgICAgICAgamFsYW4oIlxuICVzWyVz4pyTJXNdIEZpbGUgY2hlY2sgY29tcGxldGUuLi4iJShOLEgsTikpDQoNCiAgICAgICAgaW5wdXQoJyBbJXNQUkVTUyBFTlRFUiVzXSB0byBjb250aW51ZSclKEgsTikpO21vY2hfeWF5YW4oKQ0KDQojIyMjIyMgSU5GTyBVUERBVEUgJiBVUEdSQURFIFNDICMjIyMjDQoNCiAgICBlbGlmIHBlcGVrIGluWyc4JywnMDgnXToNCg0KICAgICAgICBwcmludCgiJXPilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAiJShOKSkNCg0KICAgICAgICBqYWxhbihmIiB7Qk19e1B9U0MgSU5GT3tOfVxuIFt7SH3igKJ7Tn1dIEF1dGhvciBTQyA6IHtLfVIgTyBZXG4ge059W3tIfeKAontOfV0gV2hhdHNhcHAgOiB7S30rNjAxMTYwNjEwODEyXG4ge059W3tIfeKAontOfV0gR2l0aHViIDoge0t9aHR0cHM6Ly9naXRodWIuY29tL1JPWS1JRFxuIHtOfVt7SH3igKJ7Tn1dIFN0YXR1cyBTQyA6IEdyYXRpcyByYXNhIHtIfVByZW1pdW17Tn1cblxuIHtCTX17UH1TT1VSQyBDT0RFe059XG4gW3tIfTF7Tn1dIFlheWFuWEQgICAgICBbe0h9MntOfV0gUm9taVxuIFt7SH0ze059XSBSb3poYWtYRCAgICAgW3tIfTR7Tn1dIFNpYXBhIGxhZ2k/XG5cbiB7Qk19RklYIEJVR3tOfVxuIFt7SH3inJN7Tn1dIFRlcmphZGlueWEgRXJyb3Igc2FhdCBtZW1haW5rYW4gbW9kZSBwZXNhd2F0IHNhYXQgcHJvc2VzIGNyYWNrIHNlZGFuZyBiZXJqYWxhbiwga2luaSBzdWRhaCBkaXBlcmJhaWtpIGRhbiBzdWRhaCBiaXNhIGRpbWFpbmthbiBtb2RlIHBlc2F3YXQgc2FhdCBwcm9zZXMgY3JhY2sgc2VkYW5nIGJlcmphbGFuXG4gW3tIfeKck3tOfV0gU2VkaWtpdCBwZXJ1YmFoYW4gd2FybmEgdGV4dCBkYW4gdGFtcGlsYW4gU0NcbiBbe0h94pyTe059XSBQZXJ1YmFoYW4gdXNlciBhZ2VudCBiYXdhYW4gU0NcbiBbe0h94pyTe059XSBQZW5hbWJhaGFuIG1lbmFtcGlsa2FuIHtIfVdlYiAmIEFwbGlrYXNpIEFLVElGe059IikNCg0KICAgICAgICB1cGQgPSBpbnB1dCgnXG4gJXNbJXM/JXNdIFNlbmQgZGlyZWN0IG1lc3NhZ2UgdG8gQXV0aG9yIFslc1klcy8lc3Qlc10gOiAnJShOLEssTixILE4sTSxOKSkNCg0KICAgICAgICBpZiB1cGQgPT0iIjoNCg0KICAgICAgICAgICAgZXhpdChmIntOfVt7TX3Dl3tOfV0gU29ycnksIGl0IGlzIHdyb25nLi4uISIpDQoNCiAgICAgICAgZWxpZiB1cGQgaW5bIlkiLCJ5Il06DQoNCiAgICAgICAgICAgIGphbGFuKCJcbiAlc1slc+KAoiVzXSAlc1lvdSB3aWxsIGJlIHJlZGlyZWN0ZWQgdG8gdGhlIEF1dGhvciBXaGF0c2FwcC4uLiIlKE4sSCxOLEgpKTt0aW1lLnNsZWVwKDAuMDIpDQoNCiAgICAgICAgICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly93YS5tZS82MDExNjA2MTA4MTI/dGV4dD1IYWxsbytpemluK21lbmdndW5ha2FuK1NDK2luaScpO3RpbWUuc2xlZXAoMik7ZXhpdCgpDQoNCiAgICAgICAgZWxpZiB1cGQgaW5bIlQiLCJ0Il06DQoNCiAgICAgICAgICAgIGphbGFuKGYiXG4ge059W3tIfeKAontOfV0gT2ssIHRoYW5rIHlvdS4uLiIpDQoNCiAgICAgICAgICAgIGphbGFuKCcgJXNbJXPinJMlc10gUmV0cnVuIFNDIHR5cGUgIiVzcHl0aG9uIHJ1bi5weSVzIiclKE4sSCxOLEgsTikpO2V4aXQoKQ0KDQogICAgICAgIGVsc2U6DQoNCiAgICAgICAgICAgIGV4aXQoZiJ7Tn1be019w5d7Tn1dIFNvcnJ5LCBpdCBpcyB3cm9uZy4uLiEiKQ0KDQojIyMjIyMgSEFQVVMgQ09PS0lFICMjIyMjDQoNCiAgICBlbGlmIHBlcGVrIGluWycwJywnMDAnXToNCg0KICAgICAgICBwcmludCgiIikNCg0KICAgICAgICB0aXRpayA9IFsnXHgxYlsxOzkybS4gICAnLCAnXHgxYlsxOzkzbS4uICAnLCAnXHgxYlsxOzk2bS4uLiAnLCdceDFiWzE7OTJtLiAgICcsICdceDFiWzE7OTNtLi4gICcsICdceDFiWzE7OTZtLi4uICddDQoNCiAgICAgICAgZm9yIHggaW4gdGl0aWs6DQoNCiAgICAgICAgICAgIHN5cy5zdGRvdXQud3JpdGUoJ1xyICVzWyVzISVzXSBEZWxldGluZyBUb2tlbi9Db29raWUgJXMnJShOLE0sTix4KSk7IHN5cy5zdGRvdXQuZmx1c2goKQ0KDQogICAgICAgICAgICB0aW1lLnNsZWVwKDEpDQoNCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgLnRva2VuLnR4dCcpO29zLnN5c3RlbSgncm0gLXJmIC5jb2tpZS50eHQnKQ0KDQogICAgICAgIGphbGFuKCdcbiAlc1slc+KckyVzXSAlc1N1Y2Nlc3NmdWxseSBkZWxldGUgVG9rZW4vQ29va2llLi4uJyUoTixILE4sSCkpDQoNCiAgICAgICAgamFsYW4oJ1xuICVzWyVz4pyTJXNdIFJldHJ1biBTQyB0eXBlICIlc3B5dGhvbiBydW4ucHklcyInJShOLEgsTixILE4pKTtleGl0KCkNCg0KICAgIGVsc2U6DQoNCiAgICAgICAgamFsYW4oJ1xuICVzWyVzw5clc10gU29ycnkgbWVudSBbJXMlcyVzXSBtb2RlcmF0ZSBpbXByb3ZlbWVudC4uLiEnJShOLE0sTixNLHBlcGVrLE4pKTt0aW1lLnNsZWVwKDIpO21vY2hfeWF5YW4oKQ0KDQogICAgcmV0dXJuIF9fY3JhY2tfXygpLnBsZXJyKGlkKQ0KDQojIyMjIyMgQ1JBQ0sgSUQgUkFORE9NIE1BU1NBTCAjIyMjIw0KDQpkZWYgX25nb2Nva18oX19wcGtfXyk6DQoNCiAgICB0cnk6DQoNCiAgICAgICAgcHJpbnQoIiVz4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4gJXNUQVJHRVQgSU5GTyVzIiUoTixCTSxOKSkNCg0KICAgICAgICBuYW55YV9rZXVuID0gaW50KGlucHV0KGYnICVzWyVzPyVzXSBFbnRlciB0aGUgdGFyZ2V0IGFtb3VudCA6ICVzJyUoTixLLE4sSCkpKQ0KDQogICAgZXhjZXB0Om5hbnlhX2tldW49MQ0KDQogICAgcHJpbnQoZiIgJXNbJXPigKIlc10gdHlwZSAlc21lJXMgQ3JhY2sgZnJvbSBmcmllbmRzIGxpc3QiJShOLEgsTixILE4pKQ0KDQogICAgZm9yIG1uaCBpbiByYW5nZShuYW55YV9rZXVuKToNCg0KICAgICAgICBtbmggKz0xDQoNCiAgICAgICAgdHJ5OnVzZXIgPSBpbnB1dChmJyAlc1slcz8lc10gRW50ZXIgSUQvVW5hbWUgJXMlcyVzIDogJXMnJShOLEssTixILG1uaCxOLEgpKTtfbWVtZWtfID0gX19jb252ZXJ0X18odXNlcikNCg0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6cHJpbnQoZiIge059W3tNfcOXe059XSBVc2VybmFtZSBvciBJRCBpcyBub3QgcHVibGljIik7Y29udGludWUNCg0KICAgICAgICB0cnk6DQoNCiAgICAgICAgICAgIHp6eiA9IHJlcXVlc3RzLmdldChmImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3YyLjAve19tZW1la18uZ2V0KCdfa29udG9sXycpfT9maWVsZHM9ZnJpZW5kcy5saW1pdCg1MDAwKSZhY2Nlc3NfdG9rZW49e19fcHBrX199IikuanNvbigpWyJmcmllbmRzIl0NCg0KICAgICAgICAgICAgZm9yIHggaW4genp6WyJkYXRhIl06DQoNCiAgICAgICAgICAgICAgICBpZC5hcHBlbmQoeFsiaWQiXSsiPD0+Iit4WyJuYW1lIl0rIlxuIikNCg0KICAgICAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOg0KDQogICAgICAgICAgICBqYWxhbihmJyAlc1slc8OXJXNdIFNvcnJ5ICVzRnJpZW5kcyBJRCBpcyBub3QgcHVibGljJXMnJShOLE0sTixNLE4pKTtjb250aW51ZQ0KDQojIyMjIyMgQ1JBQ0sgQU5HR09UQSBHUlVQIFBVQkxJSyAjIyMjIw0KDQpkZWYgY3JhY2tfZ3J1cCh1cmxfZ3JvdXAsa3VlaCk6DQoNCiAgICB0cnk6DQoNCiAgICAgICAgc29wX2RldiA9IEJlYXV0aWZ1bFNvdXAocmVxdWVzdHMuZ2V0KHVybF9ncm91cCwgY29va2llcz1rdWVoKS5jb250ZW50LCAiaHRtbC5wYXJzZXIiKQ0KDQogICAgICAgIG1lbWJlcnMgPSBzb3BfZGV2LmZpbmQoImRpdiIsIGlkPSJvYmplY3RzX2NvbnRhaW5lciIpDQoNCiAgICAgICAgZm9yIGRldiBpbiBtZW1iZXJzLmZpbmRfYWxsKCJ0YWJsZSIpOg0KDQogICAgICAgICAgICB1c2VyXyA9IGRldlsiaWQiXS5yZXBsYWNlKCJtZW1iZXJfIiwgIiIpDQoNCiAgICAgICAgICAgIG5hbWFfID0gcmUuZmluZGFsbCgnPGltZyBhbHQ9IiguKiksIHByb2ZpbGUgcGljdHVyZSInLCBzdHIoZGV2KSlbMF0NCg0KICAgICAgICAgICAgdHJ5OmlkLmFwcGVuZChmIntzdHIodXNlcl8pfTw9PntzdHIobmFtYV8pfVxuIikNCg0KICAgICAgICAgICAgZXhjZXB0OnBhc3MNCg0KICAgICAgICAgICAgc3lzLnN0ZG91dC53cml0ZShmIlxyIHtOfVt7SH3igKJ7Tn1dIFByb2Nlc3MgRHVtcCBJRCA6IHtIfXtsZW4oaWQpfSIpO3N5cy5zdGRvdXQuZmx1c2goKQ0KDQogICAgICAgIGlmICJMaWhhdCBTZWxlbmdrYXBueWEiIGluIHN0cihzb3BfZGV2KToNCg0KICAgICAgICAgICAgdXJsID0gc29wX2Rldi5maW5kKCJhIiwgc3RyaW5nPSJMaWhhdCBTZWxlbmdrYXBueWEiKVsiaHJlZiJdDQoNCiAgICAgICAgICAgIHVybF9ncnVwID0gImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSIrdXJsDQoNCiAgICAgICAgICAgIGNyYWNrX2dydXAodXJsX2dyb3VwLGt1ZWgpDQoNCiAgICBleGNlcHQ6cGFzcw0KDQogICAgI19pXy5fX2NyYWNrX18oKS5wbGVycihpZCkNCg0KIyMjIyMjIENSQUNLIExJS0UgUE9TVElOR0FOICMjIyMjDQoNCmRlZiBsaWtlX3Bvc3QoaGVuY2V0LCBtbWspOg0KDQogICAgdHJ5Og0KDQogICAgICAgIGtvbnRvbD1yZXF1ZXN0cy5nZXQoaGVuY2V0LGNvb2tpZXM9bW1rKS50ZXh0DQoNCiAgICAgICAgaWYgIlNlbXVhIDAiIGluIGtvbnRvbDoNCg0KICAgICAgICAgICAgZXhpdCgiIFshXSBUaGVyZSBhcmUgbm8gcmVzcG9uc2VzIHRvIHRoaXMgcG9zdCIpDQoNCiAgICAgICAgZWxzZToNCg0KICAgICAgICAgICAgbWVtZWs9cmUuZmluZGFsbCgnXDxoM1wgY2xhc3NcPVwiLi4iXD5cPGFcIGhyZWZcPVwiKC4qPykiXD4oLio/KTxcL2FcPicsa29udG9sKQ0KDQogICAgICAgICAgICBmb3Igc29mdGVrIGluIG1lbWVrOg0KDQogICAgICAgICAgICAgICAgaWYgInByb2ZpbGUucGhwPyIgaW4gc29mdGVrWzBdOg0KDQogICAgICAgICAgICAgICAgICAgIGlkLmFwcGVuZChyZS5maW5kYWxsKCJpZD0oLiopIixzb2Z0ZWtbMF0pWzBdKyI8PT4iK3NvZnRla1sxXSkNCg0KICAgICAgICAgICAgICAgIGVsc2U6DQoNCiAgICAgICAgICAgICAgICAgICAgaWQuYXBwZW5kKHJlLmZpbmRhbGwoIi8oLiopIixzb2Z0ZWtbMF0pWzBdKyI8PT4iK3NvZnRla1sxXSkNCg0KICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQud3JpdGUoZiJcciB7Tn1be0h94oCie059XSBQcm9jZXNzIER1bXAgSUQgOiB7SH17bGVuKGlkKX0iKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCg0KICAgICAgICAgICAgaWYgIkxpaGF0IFNlbGVuZ2thcG55YSIgaW4ga29udG9sOg0KDQogICAgICAgICAgICAgICAgbGlrZV9wb3N0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20iK0JlYXV0aWZ1bFNvdXAoa29udG9sLCJodG1sLnBhcnNlciIpLmZpbmQoImEiLHN0cmluZz0iTGloYXQgU2VsZW5na2FwbnlhIikuZ2V0KCJocmVmIiksIG1taykNCg0KICAgIGV4Y2VwdDpwYXNzDQoNCiAgICAjX2lfLl9fY3JhY2tfXygpLnBsZXJyKGlkKQ0KDQojIyMjIyMgQ1JBQ0sgS09NRU5UQVIgIyMjIyMNCg0KZGVmIG5nb21lbl9wb3N0KGhlbmNldCwgdG9rZW4pOg0KDQogICAgdHJ5Og0KDQogICAgICAgIGtvbnRvbD0gcmVxdWVzdHMuZ2V0KGhlbmNldCxjb29raWVzPXRva2VuLGhlYWRlcnM9eyJ1c2VyLWFnZW50IjoiTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuMS4xOyBlbi1nYjsgR1QtUzUzMDAgQnVpbGQvR0lOR0VSQlJFQUQpTWF4dGhvbiBBcHBsZVdlYktpdC81MzMuMSAoS0hUTUwsIHNlcGVydGkgR2Vja28pIFZlcnNpLzQuMCBNb2JpbGUgU2FmYXJpLzUzMy4xIn0pLnRleHQuZW5jb2RlKCJ1dGYtOCIpDQoNCiAgICAgICAgbWVtZWsgPSBCZWF1dGlmdWxTb3VwKGtvbnRvbCwnaHRtbC5wYXJzZXInKQ0KDQogICAgICAgIGZvciBtbWsgaW4gbWVtZWsuZmluZF9hbGwoJ2gzJyk6DQoNCiAgICAgICAgICAgIGZvciBfaWRfIGluIG1tay5maW5kX2FsbCgnYScsaHJlZj1UcnVlKToNCg0KICAgICAgICAgICAgICAgIGlmICJwcm9maWxlLnBocCIgaW4gX2lkXy5nZXQoImhyZWYiKToNCg0KICAgICAgICAgICAgICAgICAgICB4eiA9IF9pZF8uZ2V0KCJocmVmIikuc3BsaXQoJz0nKVsxXQ0KDQogICAgICAgICAgICAgICAgICAgIGJiID0geHouc3BsaXQoJyYnKVswXQ0KDQogICAgICAgICAgICAgICAgICAgIHhkID0gX2lkXy50ZXh0DQoNCiAgICAgICAgICAgICAgICAgICAgaWQuYXBwZW5kKGJiKyc8PT4nK3hkKydcbicpDQoNCiAgICAgICAgICAgICAgICBlbHNlOg0KDQogICAgICAgICAgICAgICAgICAgIHh6ID0gX2lkXy5nZXQoImhyZWYiKS5zcGxpdCgnPycpWzBdDQoNCiAgICAgICAgICAgICAgICAgICAgYmIgPSB4ei5zcGxpdCgnLycpWzFdDQoNCiAgICAgICAgICAgICAgICAgICAgeGQgPSBfaWRfLnRleHQNCg0KICAgICAgICAgICAgICAgICAgICBpZC5hcHBlbmQoYmIrJzw9PicreGQrJ1xuJykNCg0KICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQud3JpdGUoZiJcciB7Tn1be0h94oCie059XSBQcm9jZXNzIER1bXAgSUQgOiB7SH17bGVuKGlkKX0iKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCg0KICAgICAgICBmb3IgYXN1IGluIG1lbWVrLmZpbmRfYWxsKCJhIixocmVmPVRydWUpOg0KDQogICAgICAgICAgICBpZiAiTGloYXQga29tZW50YXIgbGFpbm55YcOi4oKswqYiIGluIGFzdS50ZXh0Og0KDQogICAgICAgICAgICAgICAgbmdvbWVuX3Bvc3QoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS8iK2FzdS5nZXQoImhyZWYiKSwgdG9rZW4pDQoNCiAgICBleGNlcHQ6cGFzcw0KDQogICAgI19pXy5fX2NyYWNrX18oKS5wbGVycihpZCkNCg0KIyBVU0VSTkFNRSBDT05WRVJUIFRPIElEDQoNCmRlZiBfX2NvbnZlcnRfXyhtbWspOg0KDQogICAgaWYgIm1lIiBpbiBtbWs6DQoNCiAgICAgICAgcmV0dXJuIHsiX2tvbnRvbF8iOm1ta30NCg0KICAgIGVsaWYocmUuZmluZGFsbCgiXHcrIixtbWspKToNCg0KICAgICAgICByID0gcmVxdWVzdHMuZ2V0KGYiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL3ttbWt9P19yZHIiKS50ZXh0DQoNCiAgICAgICAgdHJ5Og0KDQogICAgICAgICAgICB1c2VyID0gcmUuZmluZGFsbCgnXDtyaWRcPShcZCspXCYnLHN0cihyKSlbMF0NCg0KICAgICAgICBleGNlcHQ6DQoNCiAgICAgICAgICAgIHVzZXIgPSBtbWsNCg0KICAgIHJldHVybiB7Il9rb250b2xfIjp1c2VyfQ0KDQojIENIRUtFUiBBS1VOIENIRUNLUE9JTlQNCg0KZGVmIGdhYnV0KCk6DQoNCiAgICBkaXJzID0gb3MubGlzdGRpcigicmVzdWx0cyIpDQoNCiAgICBwcmludCgnJXPilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcbiAlc0ZJTEUgUkVTVUxUIENSQUNLJXMnJShOLEJNLE4pKQ0KDQogICAgZm9yIGZpbGUgaW4gZGlyczoNCg0KICAgICAgICBwcmludCgiIFslcyslc10gJXMiJShILE4sZmlsZSkpDQoNCiAgICBmaWxlcyA9IGlucHV0KCJcbiAlc1slcz8lc10gRW50ZXIgZmlsZSA6ICVzIiUoTixLLE4sSCkpDQoNCiAgICB0cnk6DQoNCiAgICAgICAgYnVrYV9iYWp1ID0gb3BlbihmJ3Jlc3VsdHMve2ZpbGVzfScsJ3InKS5yZWFkbGluZXMoKQ0KDQogICAgZXhjZXB0IElPRXJyb3I6DQoNCiAgICAgICAgcHJpbnQoJ1xuIFshXSBTb3JyeSwgdGhlIGZpbGUgZG9lc250IGV4aXN0Jyk7dGltZS5zbGVlcCgyKTttb2NoX3lheWFuKCkNCg0KICAgIHd3PWlucHV0KGYie0594pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4gW3tNfSF7Tn1dIFBsYXkgYWlycGxhbmVtb2RlIGZpcnN0Llxu4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4ge059W3tLfT97Tn1dIENoYW5nZSBwYXNzd29yZCB3aGVuIHtCTX1UQVAgWUVTe059IFt7SH1Ze059L3tNfXR7Tn1dOiB7S30iKQ0KDQogICAgaWYgd3cgaW4gKCJZIiwieSIsInlhIik6DQoNCiAgICAgICAgdWJhaFAuYXBwZW5kKCJ5IikNCg0KICAgICAgICBwcmludChmIlxuIHtOfVt7SH3igKJ7Tn1dIFBhc3N3b3JkIGV4YW1wbGUgOiB7SH1hZG1pbjEyM3tOfSIpDQoNCiAgICAgICAgcHdCYXI9aW5wdXQoZiIgW3tLfT97Tn1dIEVudGVyIG5ldyBwYXNzd29yZCA6IHtLfSIpDQoNCiAgICAgICAgaWYgbGVuKHB3QmFyKSA8PSA1Og0KDQogICAgICAgICAgICAgcHJpbnQoJ1xuICVzWyVzw5clc10gUGFzc3dvcmQgbWluaW11bSA2IGNoYXJhY3RlcnMnJShOLE0sTikpDQoNCiAgICAgICAgZWxzZToNCg0KICAgICAgICAgICAgcHdCYXJ1LmFwcGVuZChwd0JhcikNCg0KICAgIHByaW50KGYnICVzWyVz4oCiJXNdIFRvdGFsICVzJXMlcyBhY2NvdW50JyUoTixILE4sSCxzdHIobGVuKGJ1a2FfYmFqdSkpLE4pKQ0KDQogICAgcHJpbnQoIiVz4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQIiUoTikpDQoNCiAgICBmb3IgbWVtZWsgaW4gYnVrYV9iYWp1Og0KDQogICAgICAgIGtvbnRvbCA9IG1lbWVrLnJlcGxhY2UoJ1xuJywgJycpDQoNCiAgICAgICAgdGl0aWQgID0ga29udG9sLnNwbGl0KCcg4oCiICcpDQoNCiAgICAgICAgcHJpbnQoZid7Tn3ilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcbiB7SH1MT0dJTiBQUk9DRVNTJykNCg0KICAgICAgICBqYWxhbihmJyB7Tn1be019P3tOfV0gQWNjb3VudCA6IHtLfXtrb250b2wucmVwbGFjZSgiW1JPWS1DUF0gIiwgIiIpfXtOfScpDQoNCiAgICAgICAgdHJ5Og0KDQogICAgICAgICAgICBsb2dfaGFzaWwodGl0aWRbMF0ucmVwbGFjZSgiW1JPWS1DUF0gIiwgIiIpLCB0aXRpZFsxXSkNCg0KICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6DQoNCiAgICAgICAgICAgIGNvbnRpbnVlDQoNCiAgICAgICAgICAgIHByaW50KCIiKQ0KDQogICAgcHJpbnQoIiIpDQoNCiAgICBqYWxhbignICVzWyVz4pyTJXNdICVzQ2hlY2tpbmcgcHJvY2VzcyBpcyBjb21wbGV0ZSVzJyUoTixILE4sSCxOKSkNCg0KICAgIGphbGFuKCcgJXNbJXPinJMlc10gUmV0cnVuIFNDIHR5cGUgIiVzcHl0aG9uIHJ1bi5weSVzIiclKE4sSCxOLEgsTikpO2V4aXQoKQ0KDQojIENIRUtQT0lOVCBERVRFRFRPUg0KDQpkZWYgbG9nX2hhc2lsKHVzZXIsIHBhc3cpOg0KDQogICAgZ2xvYmFsIGFtYW4sY3Asc2FsYWgNCg0KICAgIHNlc3Npb249cmVxdWVzdHMuU2Vzc2lvbigpDQoNCiAgICB1YXNfY2VrZGV0ZWtkb3IgPSAiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDk7IE1pIEExIEJ1aWxkL1BLUTEuMTgwOTE3LjAwMTsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS8xMDMuMC41MDYwLjEyOSBNb2JpbGUgU2FmYXJpLzUzNy4zNiBFZGdXLzEuMCINCg0KICAgIHNlc3Npb24uaGVhZGVycy51cGRhdGUoeyJIb3N0IjoibWJhc2ljLmZhY2Vib29rLmNvbSIsImFjY2VwdCI6InRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsImFjY2VwdC1lbmNvZGluZyI6Imd6aXAsIGRlZmxhdGUiLCJhY2NlcHQtbGFuZ3VhZ2UiOmJhaGFzYSwicmVmZXJlciI6Imh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS8iLCJ1c2VyLWFnZW50Ijp1YXNfY2VrZGV0ZWtkb3J9KQ0KDQogICAgc291cD1CZWF1dGlmdWxTb3VwKHNlc3Npb24uZ2V0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04IikudGV4dCwiaHRtbC5wYXJzZXIiKQ0KDQogICAgbGluaz1zb3VwLmZpbmQoImZvcm0iLHsibWV0aG9kIjoicG9zdCJ9KQ0KDQogICAgZm9yIHggaW4gc291cCgiaW5wdXQiKToNCg0KICAgICAgICBkYXRhLnVwZGF0ZSh7eC5nZXQoIm5hbWUiKTp4LmdldCgidmFsdWUiKX0pDQoNCiAgICBkYXRhLnVwZGF0ZSh7ImVtYWlsIjp1c2VyLCJwYXNzIjpwYXN3fSkNCg0KICAgIHVybFBvc3Q9c2Vzc2lvbi5wb3N0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20iK2xpbmsuZ2V0KCJhY3Rpb24iKSxkYXRhPWRhdGEpDQoNCiAgICByZXNwb25zZT1CZWF1dGlmdWxTb3VwKHVybFBvc3QudGV4dCwgImh0bWwucGFyc2VyIikNCg0KICAgIGlmICJUZW11a2FuIEFrdW4gQW5kYSIgaW4gcmUuZmluZGFsbCgiXDx0aXRsZT4oLio/KTxcL3RpdGxlPiIsc3RyKHVybFBvc3QudGV4dCkpOg0KDQogICAgICAgIHN5cy5zdGRvdXQud3JpdGUoJ1xyICVzWyVzISVzXSBUdXJuIG9uIGFpcnBsYW5lbW9kZSAyIHNlY29uZHMnJShOLE0sTikpLA0KDQogICAgaWYgImNfdXNlciIgaW4gc2Vzc2lvbi5jb29raWVzLmdldF9kaWN0KCk6DQoNCiAgICAgICAgaWYgIkFrdW4gQW5kYSBEaWt1bmNpIiBpbiB1cmxQb3N0LnRleHQ6DQoNCiAgICAgICAgICAgIHByaW50KGYiXHIge059W3tNfcOXe059XSBBY2NvdW50IGxvY2tlZCIpDQoNCiAgICAgICAgZWxzZToNCg0KICAgICAgICAgICAgY29raSA9ICgiOyIpLmpvaW4oWyAiJXM9JXMiICUgKGtleSwgdmFsdWUpIGZvciBrZXksIHZhbHVlIGluIHNlc3Npb24uY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCkgXSkNCg0KICAgICAgICAgICAgb3BlbigncmVzdWx0cy9PS0UudHh0JywgJ2EnKS53cml0ZShmIlvinJNdIHt1c2VyfSDigKIge3Bhc3d9XG4iKQ0KDQogICAgICAgICAgICBqYWxhbihmIlxyIHtOfVt7SH3inJN7Tn1dIHtIfUFjY291bnQgdW5sb2NrZWR7Tn0iKTt0aW1lLnNsZWVwKDAuMDMpDQoNCiAgICAgICAgICAgIGNla19hcGsoc2Vzc2lvbixjb2tpKQ0KDQogICAgZWxpZiAiY2hlY2twb2ludCIgaW4gc2Vzc2lvbi5jb29raWVzLmdldF9kaWN0KCk6DQoNCiAgICAgICAgdGl0bGU9cmUuZmluZGFsbCgiXDx0aXRsZT4oLio/KTxcL3RpdGxlPiIsc3RyKHJlc3BvbnNlKSkNCg0KICAgICAgICBsaW5rMj1yZXNwb25zZS5maW5kKCJmb3JtIix7Im1ldGhvZCI6InBvc3QifSkNCg0KICAgICAgICBsaXN0SW5wdXQ9WydmYl9kdHNnJywnamF6b2VzdCcsJ2NoZWNrcG9pbnRfZGF0YScsJ3N1Ym1pdFtDb250aW51ZV0nLCduaCddDQoNCiAgICAgICAgZm9yIHggaW4gcmVzcG9uc2UoImlucHV0Iik6DQoNCiAgICAgICAgICAgIGlmIHguZ2V0KCJuYW1lIikgaW4gbGlzdElucHV0Og0KDQogICAgICAgICAgICAgICAgZGF0YTIudXBkYXRlKHt4LmdldCgibmFtZSIpOnguZ2V0KCJ2YWx1ZSIpfSkNCg0KICAgICAgICBhbj1zZXNzaW9uLnBvc3QodXJsX21iK2xpbmsyLmdldCgiYWN0aW9uIiksZGF0YT1kYXRhMikNCg0KICAgICAgICByZXNwb25zZTI9QmVhdXRpZnVsU291cChhbi50ZXh0LCJodG1sLnBhcnNlciIpDQoNCiAgICAgICAgbnVtYmVyPTANCg0KICAgICAgICBjZWs9W2Nlay50ZXh0IGZvciBjZWsgaW4gcmVzcG9uc2UyLmZpbmRfYWxsKCJvcHRpb24iKV0NCg0KICAgICAgICBpZihsZW4oY2VrKT09MCk6DQoNCiAgICAgICAgICAgIGlmICJMaWhhdCBkZXRhaWwgbG9naW4geWFuZyBkaXRhbXBpbGthbi4gSW5pIEFuZGE/IiBpbiB0aXRsZToNCg0KICAgICAgICAgICAgICAgIGlmICJ5IiBpbiB1YmFoUDoNCg0KICAgICAgICAgICAgICAgICAgICBtbWsgPSBwd0JhcnUNCg0KICAgICAgICAgICAgICAgICAgICBqYWxhbihmIlxyIFt7SH3igKJ7Tn1dIFN0YXR1cyA6IHtCTX17UH1UQVAgWUVTe059Iik7dGltZS5zbGVlcCgwLjAzKQ0KDQogICAgICAgICAgICAgICAgICAgIHViYWhfcHcoc2Vzc2lvbixyZXNwb25zZSxsaW5rMix1c2VyLCBtbWspDQoNCiAgICAgICAgICAgICAgICBlbHNlOg0KDQogICAgICAgICAgICAgICAgICAgIG1tayA9ICJhZG1pbnJveTEyMyINCg0KICAgICAgICAgICAgICAgICAgICBqYWxhbihmIlxyIFt7SH3igKJ7Tn1dIFN0YXR1cyA6IHtCTX17UH1UQVAgWUVTe059Iik7dGltZS5zbGVlcCgwLjAzKQ0KDQogICAgICAgICAgICAgICAgICAgIHViYWhfcHcoc2Vzc2lvbixyZXNwb25zZSxsaW5rMix1c2VyLCBtbWspDQoNCiAgICAgICAgICAgIGVsaWYgIk1hc3VrYW4gS29kZSBNYXN1ayB1bnR1ayBNZWxhbmp1dGthbiIgaW4gcmUuZmluZGFsbCgiXDx0aXRsZT4oLio/KTxcL3RpdGxlPiIsc3RyKHJlc3BvbnNlKSk6DQoNCiAgICAgICAgICAgICAgICBwcmludCgnIFslcyElc10gU29ycnksIHRoZSBhY2NvdW50IGlzIGluc3RhbGxlZCBBMkYnJShNLE4pKQ0KDQogICAgICAgICAgICBlbHNlOg0KDQogICAgICAgICAgICAgICAgb3BlbigncmVzdWx0cy9FUlJPUi50eHQnLCAnYScpLndyaXRlKGYiW1JPWS1DUF0ge3VzZXJ9IOKAoiB7cGFzd31cbiIpDQoNCiAgICAgICAgICAgICAgICBwcmludChmIiB7Tn1be019IXtOfV0gRXJyb3IiKQ0KDQogICAgICAgIGVsc2U6DQoNCiAgICAgICAgICAgIG9wZW4oZidyZXN1bHRzL0NQLURFVEVLVE9SLXtoYX0te29wfS17dGF9LnR4dCcsICdhJykud3JpdGUoZiJbUk9ZLUNQXSB7dXNlcn0g4oCiIHtwYXN3fVxuIikNCg0KICAgICAgICAgICAgcHJpbnQoIiAlc1slc+KAoiVzXSBUaGVyZSBhcmUgJXMgb3B0aW9ucyAiJShOLEgsTixsZW4oY2VrKSkpDQoNCiAgICAgICAgZm9yIG9wdCBpbiByYW5nZShsZW4oY2VrKSk6DQoNCiAgICAgICAgICAgIHByaW50KGYiIFtceDFiWzE7OTJte3N0cihvcHQrMSl9XHgxYlswbV0gIitjZWtbb3B0XSkNCg0KICAgIGVsc2U6DQoNCiAgICAgICAgcHJpbnQoZiJcciB7Tn1be019IXtOfV0gUGFzc3dvcmQgaXMgd3Jvbmcgb3IgaGFzIGJlZW4gY2hhbmdlZCIpDQoNCiAgICAgICAgb3BlbigncmVzdWx0cy9JTlZBTElELU9LLnR4dCcsICdhJykud3JpdGUoZiJbUk9ZLUNQXSB7dXNlcn0g4oCiIHtwYXN3fVxuIikNCg0KI1VCQUggUFcNCg0KZGVmIHViYWhfcHcoc2Vzc2lvbixyZXNwb25zZSxsaW5rMix1c2VyLG1tayk6DQoNCiAgICBkYXQsZGF0Mj17fSx7fQ0KDQogICAgYnV0PVsic3VibWl0W1llc10iLCJuaCIsImZiX2R0c2ciLCJqYXpvZXN0IiwiY2hlY2twb2ludF9kYXRhIl0NCg0KICAgIGZvciB4IGluIHJlc3BvbnNlKCJpbnB1dCIpOg0KDQogICAgICAgIGlmIHguZ2V0KCJuYW1lIikgaW4gYnV0Og0KDQogICAgICAgICAgICBkYXQudXBkYXRlKHt4LmdldCgibmFtZSIpOnguZ2V0KCJ2YWx1ZSIpfSkNCg0KICAgIHViYWhQdz1zZXNzaW9uLnBvc3QodXJsX21iK2xpbmsyLmdldCgiYWN0aW9uIiksZGF0YT1kYXQpLnRleHQNCg0KICAgIHJlc1ViYWg9QmVhdXRpZnVsU291cCh1YmFoUHcsImh0bWwucGFyc2VyIikNCg0KICAgIGxpbmszPXJlc1ViYWguZmluZCgiZm9ybSIseyJtZXRob2QiOiJwb3N0In0pDQoNCiAgICBidXQyPVsic3VibWl0W05leHRdIiwibmgiLCJmYl9kdHNnIiwiamF6b2VzdCJdDQoNCiAgICBpZiAiQnVhdCBLYXRhIFNhbmRpIEJhcnUiIGluIHJlLmZpbmRhbGwoIlw8dGl0bGU+KC4qPyk8XC90aXRsZT4iLHN0cih1YmFoUHcpKToNCg0KICAgICAgICBmb3IgYiBpbiByZXNVYmFoKCJpbnB1dCIpOg0KDQogICAgICAgICAgICBpZiBiLmdldCgibmFtZSIpIGluIGJ1dDI6DQoNCiAgICAgICAgICAgICAgICBkYXQyLnVwZGF0ZSh7Yi5nZXQoIm5hbWUiKTpiLmdldCgidmFsdWUiKX0pDQoNCiAgICAgICAgZGF0Mi51cGRhdGUoeyJwYXNzd29yZF9uZXciOiIiLmpvaW4obW1rKX0pDQoNCiAgICAgICAgYW49c2Vzc2lvbi5wb3N0KHVybF9tYitsaW5rMy5nZXQoImFjdGlvbiIpLGRhdGE9ZGF0MikNCg0KICAgICAgICBjb2tpID0gKCI7Iikuam9pbihbICIlcz0lcyIgJSAoa2V5LCB2YWx1ZSkgZm9yIGtleSwgdmFsdWUgaW4gc2Vzc2lvbi5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKSBdKQ0KDQogICAgICAgIHByaW50KGYiXHIge059W3tIfVRBUC1ZRVN7Tn1dIHtIfXt1c2VyfSDigKIgeycnLmpvaW4obW1rKX17Tn0iKQ0KDQogICAgICAgIHByaW50KGYiXHIge0F9Q29va2llIDoge2Nva2l9e059IikNCg0KICAgICAgICBvcGVuKCdyZXN1bHRzL1RBQi1ZRVMudHh0JywgJ2EnKS53cml0ZShmIltUQVAtWUVTXSB7dXNlcn0g4oCiIHsnJy5qb2luKG1tayl9XG4iKQ0KDQogICAgICAgIGNla19hcGsoc2Vzc2lvbixjb2tpKQ0KDQojIENFSyBBUExJS0FTSSBZQU5HIFRFUktBSVQNCg0KZGVmIGNla19hcGsoc2Vzc2lvbixjb2tpKToNCg0KICAgIHc9c2Vzc2lvbi5nZXQoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9zZXR0aW5ncy9hcHBzL3RhYmJlZC8/dGFiPWFjdGl2ZSIsY29va2llcz17ImNvb2tpZSI6Y29raX0pLnRleHQNCg0KICAgIHNvcCA9IEJlYXV0aWZ1bFNvdXAodywiaHRtbC5wYXJzZXIiKQ0KDQogICAgeCA9IHNvcC5maW5kKCJmb3JtIixtZXRob2Q9InBvc3QiKQ0KDQogICAgZ2FtZSA9IFtpLnRleHQgZm9yIGkgaW4geC5maW5kX2FsbCgiaDMiKV0NCg0KICAgIGlmIGxlbihnYW1lKT09MDoNCg0KICAgICAgICBwcmludChmJ1xyICVzWyVzISVzXSAlc1NvcnJ5IHRoZXJlIGlzIG5vIEFjdGl2ZSBBcGslcyAgJyUoTixNLE4sTSxOKSkNCg0KICAgIGVsc2U6DQoNCiAgICAgICAgcHJpbnQoZidcciDwn46uICAlc1lvdXIgQWN0aXZlIEFwcGxpY2F0aW9uIERldGFpbHMgOiclKEgpKQ0KDQogICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihnYW1lKSk6DQoNCiAgICAgICAgICAgIHByaW50KGYiXHIgJXMlcy4gJXMlcyIlKE4saSsxLGdhbWVbaV0ucmVwbGFjZSgiRGl0YW1iYWhrYW4gcGFkYSIsIiBEaXRhbWJhaGthbiBwYWRhIiksTikpDQoNCiAgICAgICAgI2Vsc2U6DQoNCiAgICAgICAgICAgICNwcmludChmJ1xyICVzWyVzISVzXSBTb3JyeSwgQXBrIGNoZWNrIGZhaWxlZCBpbnZhbGlkIGNvb2tpZSclKE4sTSxOKSkNCg0KICAgIHc9c2Vzc2lvbi5nZXQoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9zZXR0aW5ncy9hcHBzL3RhYmJlZC8/dGFiPWluYWN0aXZlIixjb29raWVzPXsiY29va2llIjpjb2tpfSkudGV4dA0KDQogICAgc29wID0gQmVhdXRpZnVsU291cCh3LCJodG1sLnBhcnNlciIpDQoNCiAgICB4ID0gc29wLmZpbmQoImZvcm0iLG1ldGhvZD0icG9zdCIpDQoNCiAgICBnYW1lID0gW2kudGV4dCBmb3IgaSBpbiB4LmZpbmRfYWxsKCJoMyIpXQ0KDQogICAgaWYgbGVuKGdhbWUpPT0wOg0KDQogICAgICAgIHByaW50KGYnXHIgJXNbJXMhJXNdICVzU29ycnkgbm8gRXhwaXJlZCBBcGslcyAgICAgICAgICAgXG4nJShOLE0sTixNLE4pKQ0KDQogICAgZWxzZToNCg0KICAgICAgICBwcmludChmJ1xyIPCfjq4gICVzWW91ciBFeHBpcmVkIEFwcGxpY2F0aW9uIERldGFpbHMgOiclKE0pKQ0KDQogICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihnYW1lKSk6DQoNCiAgICAgICAgICAgIHByaW50KGYiXHIgJXMlcy4gJXMlcyIlKE4saSsxLGdhbWVbaV0ucmVwbGFjZSgiS2VkYWx1d2Fyc2EiLCIgS2VkYWx1d2Fyc2EiKSxOKSkNCg0KICAgICAgICBlbHNlOg0KDQogICAgICAgICAgICBwcmludChmJ1xyJykNCg0KICAgICAgICAgICAgI3ByaW50KGYnXHIgJXNbJXMhJXNdIFNvcnJ5LCBBcGsgY2hlY2sgZmFpbGVkIGludmFsaWQgY29va2llXG4nJShOLE0sTikpDQoNCiMgTVVMQUkgQ1JBQ0sNCg0KY2xhc3MgX19jcmFja19fOg0KDQoNCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmKToNCg0KICAgICAgICBzZWxmLmlkID0gW10NCg0KICAgICMgLS0tLS0tLSBOQU1QSUxLQU4gQVBMSUtBU0kgLS0tLS0tLS0NCg0KICAgIGRlZiB0YW1waWxrYW5fYXBrKHNlbGYpOg0KDQogICAgICAgIHByaW50KCIlc+KVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxuIFslcyVzXSBNRU5BTVBJTEtBTiBBUEsgQUtBTiBNRU1CVUFUIEFLVU4gTElWRSBNRU5KQURJIENIRUtQT0lOVFModGlkYWsgZGlzYXJhbmthbikiJShILEgsSCkpDQoNCiAgICAgICAgY3JvdCA9IGlucHV0KGYiIHtOfVt7S33wn5GMe059XSBzZWJlbHVtIGxhbmp1dCBtYXN1a2FuIHBhc3dvcmQgc2NyaXB0IHVudHVrIGtlIDIga2FsaSBueWE6IHtIfSIpDQoNCiAgICAgICAgY3JvdCA9IGlucHV0KGYiIHtIfSBJTkdJTiBNRU5BTVBJTEtBTiBBUEs/W3tIfXl7SH0ve0h9bntOfV06ICIpDQoNCiAgICAgICAgaWYgY3JvdCBpblsiIl06DQoNCiAgICAgICAgICAgIHByaW50KGYiIHtOfVt7TX3Dl3tOfV0gRG9uJ3QgYmUgZW1wdHkiKTtzZWxmLnRhbXBpbGthbl9hcGsoKQ0KDQogICAgICAgIGVsaWYgY3JvdCBpblsiWSIsInkiXToNCg0KICAgICAgICAgICAgQXBrLmFwcGVuZCgieSIpDQoNCiAgICAgICAgZWxpZiBjcm90IGluWyJOIiwibiJdOg0KDQogICAgICAgICAgICBBcGsuYXBwZW5kKCJ0IikNCg0KICAgICAgICBlbHNlOg0KDQogICAgICAgICAgICAjamFsYW4oZiIge059W3tNfcOXe059XSBTb3JyeSwgd3JvbmcgdXNlcm5hbWUiKTtzZWxmLnRhbXBpbGthbl9hcGsoKQ0KDQogICAgICAgICAgICBwcmludChmIiB7Tn1be0198J+SgHtOfV0gcGlsaWh5L3QiKTtzZWxmLnRhbXBpbGthbl9hcGsoKQ0KDQojIE1FVE9ERSBTQU5ESSBNQU5VQUwNCg0KICAgIGRlZiBwbGVycihzZWxmLGlkKToNCg0KICAgICAgICBzZWxmLmlkID0gaWQNCg0KICAgICAgICBwcmludChmJ1xuICVzWyVz4oCiJXNdIEJFUkhBU0lMIFRFUktVTVBVTDogJXMlcyVzJyAlKEgsSCxILEgsbGVuKHNlbGYuaWQpLE4pKQ0KDQogICAgICAgIF9fX3lheWFuZ2FudGVuZ19fXyA9IGlucHV0KCclc+KVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxuIFslcz8lc10gbWFzdWthbiBwYXN3b3JkIHNjcmlwdCB1bnV0dWsga2UgMiBrYWxpIG55YSAoJXNlbnRlciVzKSA6ICVzJyUoTSxNLE0sTSxNLE0pKQ0KDQogICAgICAgIGlmIF9fX3lheWFuZ2FudGVuZ19fXyBpbiAoJ3JpZHdhbicsICdyaWR3YW4nKToNCg0KICAgICAgICAgICAgc2VsZi50YW1waWxrYW5fYXBrKCkNCg0KICAgICAgICAgICAgcHJpbnQoJyVz4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4gJXNNQU5VQUwgUEFTU1dPUkQgREVUQUlMUyVzJyUoTixILEgpKQ0KDQogICAgICAgICAgICBwcmludCgnICVzWyVzISVzXSBVc2UgJXNLT01NQSVzIGZvciBzZXBhcmF0b3JcbiBbJXPigKIlc10gRXhhbXBsZSA6ICVzcm95MTIzJXMsJXNzYXlhbmclcywlc2Jpc21pbGxhaCclKE4sTSxOLEgsTixILE4sSCxOLEgsTixIKSkNCg0KICAgICAgICAgICAgd2hpbGUgVHJ1ZToNCg0KICAgICAgICAgICAgICAgIHB3ZWsgPSBpbnB1dCgnICVzWyVzPyVzXSBFbnRlciBwYXNzd29yZCA6ICVzJyUoTixLLE4sSCkpDQoNCiAgICAgICAgICAgICAgICBwcmludCgnICVzWyVz4oCiJXNdIEFjdGl2ZSBQYXNzd29yZCA6ICVzJXMlcycgJSAoTixILE4sSCwgcHdlaywgTikpDQoNCiAgICAgICAgICAgICAgICBpZiBwd2VrID09ICcnOg0KDQogICAgICAgICAgICAgICAgICAgIHByaW50KCdcbiAlc1slc8OXJXNdIFNvcnJ5LCBpdCBpcyB3cm9uZy4uLiEnJShOLE0sTikpDQoNCiAgICAgICAgICAgICAgICBlbGlmIGxlbihwd2VrKTw9NToNCg0KICAgICAgICAgICAgICAgICAgICBwcmludCgnXG4gJXNbJXPDlyVzXSBQYXNzd29yZCBtaW5pbXVtIDYgY2hhcmFjdGVycyclKE4sTSxOKSkNCg0KICAgICAgICAgICAgICAgIGVsc2U6DQoNCiAgICAgICAgICAgICAgICAgICAgZGVmIF9feWFuX18oeXNjPU5vbmUpOiAjIHljcyA9PiBZYXlhbiBzYXlhbmcgQ2luZHk6Mw0KDQogICAgICAgICAgICAgICAgICAgICAgICBjaW4gPSBpbnB1dCgnXG4gJXNbJXMlc10gcGlsaWggOiAnJShOLEssTikpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNpbiA9PSAnJzoNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdcbiAlc1slc8OXJXNdIFNvcnJ5LCBpdCBpcyB3cm9uZy4uLiEnJShOLE0sTikpO19feWFuX18oKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGNpbiA9PSAnMSc6DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnJXPilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcbiBbJXMrJXNdIE9LIDogcmVzdWx0cy9PSy0lcy0lcy0lcy50eHQnJShOLEgsTixoYSwgb3AsIHRhKSkNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCcgJXNbJXMrJXNdIENQIDogcmVzdWx0cy9DUC0lcy0lcy0lcy50eHQnJShOLEssTixoYSwgb3AsIHRhKSkNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCclc+KVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxuIFslcyElc11BTkRBIE1FTkdVTkFLQU4gVVNFUi1BR0VOVCBJTkk6e3Vha3V9XG7ilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAnJShOLEgsTixNLEgsSCxILEgsSCkpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoIFlheWFuR2FudGVuZyhtYXhfd29ya2Vycz0zMCkgYXMgKF9feWF5YW5YRF9fKToNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaWtlaCBpbiBzZWxmLmlkOg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnk6DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW1vY2hpID0gaWtlaC5zcGxpdCgnPD0+JylbMF0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9feWF5YW5YRF9fLnN1Ym1pdChzZWxmLl9fbWV0b2RlX18sIGtpbW9jaGksIHlzYywgImZyZWUuZmFjZWJvb2suY29tIikNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0OiBwYXNzDQoNCg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaWwob2ssY3ApDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgY2luID09ICcyJzoNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCclc+KVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxuIFslcyslc10gT0sgOiByZXN1bHRzL09LLSVzLSVzLSVzLnR4dCclKE4sSCxOLGhhLCBvcCwgdGEpKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJyAlc1slcyslc10gQ1AgOiByZXN1bHRzL0NQLSVzLSVzLSVzLnR4dCclKE4sSyxOLGhhLCBvcCwgdGEpKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJyVz4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4gWyVzISVzXWFuZGEgc2VkYW5nIG1lbmd1bmFrYW4gdXNlci1hZ2VudCBpbmk6e3Vha3V9XG7ilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAnJShOLE0sTixNLE4sTSxOLEgsTikpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoIFlheWFuR2FudGVuZyhtYXhfd29ya2Vycz0zMCkgYXMgKF9feWF5YW5YRF9fKToNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaWtlaCBpbiBzZWxmLmlkOg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnk6DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW1vY2hpID0gaWtlaC5zcGxpdCgnPD0+JylbMF0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9feWF5YW5YRF9fLnN1Ym1pdChzZWxmLl9fbWV0b2RlX18sIGtpbW9jaGksIHlzYywgIm1iYXNpYy5mYWNlYm9vay5jb20iKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6IHBhc3MNCg0KDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNpbChvayxjcCkNCg0KICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBjaW4gPT0gJzMnOg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJyVz4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4gWyVzKyVzXSBPSyA6IHJlc3VsdHMvT0stJXMtJXMtJXMudHh0JyUoTixILE4saGEsIG9wLCB0YSkpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnICVzWyVzKyVzXSBDUCA6IHJlc3VsdHMvQ1AtJXMtJXMtJXMudHh0JyUoTixLLE4saGEsIG9wLCB0YSkpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnJXPilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcbiBbJXMhJXNBTkRBIFNFS0FSQU5HIE1FTkdVTkFLQU4gVVNFUi1BR0VOVDp7dWFrdX1cbuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkCclKE4sTSxOLE0sTixNLE4sSCxOKSkNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggWWF5YW5HYW50ZW5nKG1heF93b3JrZXJzPTMwKSBhcyAoX195YXlhblhEX18pOg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpa2VoIGluIHNlbGYuaWQ6DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeToNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtpbW9jaGkgPSBpa2VoLnNwbGl0KCc8PT4nKVswXQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX195YXlhblhEX18uc3VibWl0KHNlbGYuX19tZXRvZGVfXywga2ltb2NoaSwgeXNjLCAibWJhc2ljLmZhY2Vib29rLmNvbSIpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDogcGFzcw0KDQoNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2lsKG9rLGNwKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJyBbJXPDlyVzXSBTb3JyeSwgaXQgaXMgd3JvbmcuLi4hJyUoTixNLE4pKTtfX3lhbl9fKCkNCg0KICAgICAgICAgICAgICAgICAgICBtZW50b2QoKQ0KDQogICAgICAgICAgICAgICAgICAgIF9feWFuX18ocHdlay5zcGxpdCgnLCcpKQ0KDQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQoNCiAgICAgICAgZWxpZiBfX195YXlhbmdhbnRlbmdfX18gaW4gKCdiZ3MnKToNCg0KICAgICAgICAgICAgc2VsZi50YW1waWxrYW5fYXBrKCkNCg0KICAgICAgICAgICAgDQoNCiAgICAgICAgICAgIHNlbGYuX19wbGVyX18oKQ0KDQogICAgICAgIGVsc2U6DQoNCiAgICAgICAgICAgIGphbGFuKCcgJXNbJXPDlyVzXSBTb3JyeSwgd3JvbmcgU0MgUGFzc3dvcmQnJShOLE0sTikpO3NlbGYucGxlcnIoaWQpDQoNCiAgICAgICAgICAgICNwcmludCgnXG4gJXNbJXPDlyVzXSBTb3JyeSwgaXQgaXMgd3JvbmcuLi4hJyUoTixNLE4pKTtzZWxmLnBsZXJyKGlkKQ0KDQojIFBST1NFUyBDUkFDSyBNRVRPREUgMyBpbiAxDQoNCiAgICBkZWYgX19tZXRvZGVfXyhzZWxmLCBjZWJvaywgdXNlciwgcGFzdyk6DQoNCiAgICAgICAgZ2xvYmFsIG9rLGNwLGxvb3ANCg0KICAgICAgICBhbmltYXNpID0gcmFuZG9tLmNob2ljZShbIlx4MWJbMTs5N21b8J+klvCfkq9dIl0pDQoNCiAgICAgICAgc3lzLnN0ZG91dC53cml0ZShmIlxyIHtOfXthbmltYXNpfSB7Tn17bG9vcH17Tn0ve019e2xlbihzZWxmLmlkKX0ge059W3tVfUxJVkU6e2xlbihvayl9e059XVt7TX1DSEVLOntsZW4oY3ApfXtOfV0gW3tIfXsnezouMSV9Jy5mb3JtYXQobG9vcC9mbG9hdChsZW4oc2VsZi5pZCkpKX17Tn1dIikNCg0KICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkNCg0KICAgICAgICB0cnk6b3MubWtkaXIoJ3Jlc3VsdHMnKQ0KDQogICAgICAgIGV4Y2VwdDpwYXNzDQoNCiAgICAgICAgdHJ5Og0KDQogICAgICAgICAgICBmb3IgcHcgaW4gcGFzdzoNCg0KICAgICAgICAgICAgICAgIHB3ID0gcHcubG93ZXIoKQ0KDQogICAgICAgICAgICAgICAgc2Vzc2lvbj1yZXF1ZXN0cy5TZXNzaW9uKCkNCg0KICAgICAgICAgICAgICAgIG5pcD1yYW5kb20uY2hvaWNlKHByb3gpDQoNCiAgICAgICAgICAgICAgICBwcm94cz0geydodHRwJzogJ3NvY2tzNDovLycrbmlwfQ0KDQogICAgICAgICAgICAgICAgI3VhMSA9IHJhbmRvbS5jaG9pY2UoYWdlbjEpDQoNCiAgICAgICAgICAgICAgICAjdWEyID0gcmFuZG9tLmNob2ljZShhZ2VuMikNCg0KICAgICAgICAgICAgICAgIHVhID0gcmFuZG9tLmNob2ljZSh1Z2VuKQ0KDQogICAgICAgICAgICAgICAgdWEyID0gcmFuZG9tLmNob2ljZSh1Z2VuMikNCg0KICAgICAgICAgICAgICAgIHNlc3Npb24uaGVhZGVycy51cGRhdGUoeydIb3N0JzogY2Vib2ssJ2NhY2hlLWNvbnRyb2wnOiAnbWF4LWFnZT0wJywnc2VjLWNoLXVhLW1vYmlsZSc6ICc/MScsJ3VwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMnOiAnMScsJ3VzZXItYWdlbnQnOiB1YSwnYWNjZXB0JzogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOScsJ3NlYy1mZXRjaC1zaXRlJzogJ3NhbWUtb3JpZ2luJywnc2VjLWZldGNoLW1vZGUnOiAnY29ycycsJ3NlYy1mZXRjaC1kZXN0JzogJ2VtcHR5JywnYWNjZXB0LWxhbmd1YWdlJzogJ2lkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43J30pDQoNCiAgICAgICAgICAgICAgICBwID0gc2Vzc2lvbi5nZXQoJ2h0dHBzOi8vJytjZWJvaysnL2xvZ2luL2RldmljZS1iYXNlZC9wYXNzd29yZC8/dWlkPScrdXNlcisnJmZsb3c9bG9naW5fbm9fcGluJm5leHQ9aHR0cHMlM0ElMkYlMkZtLmZhY2Vib29rLmNvbSUyRnYyLjMlMkZkaWFsb2clMkZvYXV0aCUzRmFwcF9pZCUzRDEyNDAyNDU3NDI4NzQxNCUyNmNidCUzRDE2NTE2NTgyMDA5NzglMjZlMmUlM0QlMjU3QiUyNTIyaW5pdCUyNTIyJTI1M0ExNjUxNjU4MjAwOTc4JTI1N0QlMjZzc28lM0RjaHJvbWVfY3VzdG9tX3RhYiUyNnNjb3BlJTNEZW1haWwlMjZzdGF0ZSUzRCUyNTdCJTI1MjIwX2F1dGhfbG9nZ2VyX2lkJTI1MjIlMjUzQSUyNTIyNjhmMTViYWUtMjNmOC00NjNjLTg2NjAtNWNmMTIyNmQ5N2Y2JTI1MjIlMjUyQyUyNTIyN19jaGFsbGVuZ2UlMjUyMiUyNTNBJTI1MjJkYWhqMjhocXRpZXRtaHJncHJwcCUyNTIyJTI1MkMlMjUyMjNfbWV0aG9kJTI1MjIlMjUzQSUyNTIyY3VzdG9tX3RhYiUyNTIyJTI1N0QlMjZyZWRpcmVjdF91cmklM0RmYmNvbm5lY3QlMjUzQSUyNTJGJTI1MkZjY3QuY29tLmluc3RhdGh1bmRlci5hcHAlMjZyZXNwb25zZV90eXBlJTNEdG9rZW4lMjUyQ3NpZ25lZF9yZXF1ZXN0JTI1MkNncmFwaF9kb21haW4lMjUyQ2dyYW50ZWRfc2NvcGVzJTI2cmV0dXJuX3Njb3BlcyUzRHRydWUlMjZyZXQlM0Rsb2dpbiUyNmZiYXBwX3ByZXMlM0QwJTI2bG9nZ2VyX2lkJTNENjhmMTViYWUtMjNmOC00NjNjLTg2NjAtNWNmMTIyNmQ5N2Y2JTI2dHAlM0R1bnNwZWNpZmllZCZjYW5jZWxfdXJsPWZiY29ubmVjdCUzQSUyRiUyRmNjdC5jb20uaW5zdGF0aHVuZGVyLmFwcCUzRmVycm9yJTNEYWNjZXNzX2RlbmllZCUyNmVycm9yX2NvZGUlM0QyMDAlMjZlcnJvcl9kZXNjcmlwdGlvbiUzRFBlcm1pc3Npb25zJTJCZXJyb3IlMjZlcnJvcl9yZWFzb24lM0R1c2VyX2RlbmllZCUyNnN0YXRlJTNEJTI1N0IlMjUyMjBfYXV0aF9sb2dnZXJfaWQlMjUyMiUyNTNBJTI1MjI2OGYxNWJhZS0yM2Y4LTQ2M2MtODY2MC01Y2YxMjI2ZDk3ZjYlMjUyMiUyNTJDJTI1MjI3X2NoYWxsZW5nZSUyNTIyJTI1M0ElMjUyMmRhaGoyOGhxdGlldG1ocmdwcnBwJTI1MjIlMjUyQyUyNTIyM19tZXRob2QlMjUyMiUyNTNBJTI1MjJjdXN0b21fdGFiJTI1MjIlMjU3RCZkaXNwbGF5PXRvdWNoJmxvY2FsZT1pZF9JRCZwbF9kYmw9MCZyZWZzcmM9ZGVwcmVjYXRlZCZfcmRyJykNCg0KICAgICAgICAgICAgICAgIGRhdGFhID17ImxzZCI6cmUuc2VhcmNoKCduYW1lPSJsc2QiIHZhbHVlPSIoLio/KSInLCBzdHIocC50ZXh0KSkuZ3JvdXAoMSksImphem9lc3QiOnJlLnNlYXJjaCgnbmFtZT0iamF6b2VzdCIgdmFsdWU9IiguKj8pIicsIHN0cihwLnRleHQpKS5ncm91cCgxKSwidWlkIjp1c2VyLCJuZXh0IjoiaHR0cHM6Ly8iK2NlYm9rKyIvdjIuMy9kaWFsb2cvb2F1dGg/YXBwX2lkPTEyNDAyNDU3NDI4NzQxNCZjYnQ9MTY1MTY1ODIwMDk3OCZlMmU9JTdCJTIyaW5pdCUyMiUzQTE2NTE2NTgyMDA5NzglN0Qmc3NvPWNocm9tZV9jdXN0b21fdGFiJnNjb3BlPWVtYWlsJnN0YXRlPSU3QiUyMjBfYXV0aF9sb2dnZXJfaWQlMjIlM0ElMjI2OGYxNWJhZS0yM2Y4LTQ2M2MtODY2MC01Y2YxMjI2ZDk3ZjYlMjIlMkMlMjI3X2NoYWxsZW5nZSUyMiUzQSUyMmRhaGoyOGhxdGlldG1ocmdwcnBwJTIyJTJDJTIyM19tZXRob2QlMjIlM0ElMjJjdXN0b21fdGFiJTIyJTdEJnJlZGlyZWN0X3VyaT1mYmNvbm5lY3QlM0ElMkYlMkZjY3QuY29tLmluc3RhdGh1bmRlci5hcHAmcmVzcG9uc2VfdHlwZT10b2tlbiUyQ3NpZ25lZF9yZXF1ZXN0JTJDZ3JhcGhfZG9tYWluJTJDZ3JhbnRlZF9zY29wZXMmcmV0dXJuX3Njb3Blcz10cnVlJnJldD1sb2dpbiZmYmFwcF9wcmVzPTAmbG9nZ2VyX2lkPTY4ZjE1YmFlLTIzZjgtNDYzYy04NjYwLTVjZjEyMjZkOTdmNiZ0cD11bnNwZWNpZmllZCIsImZsb3ciOiJsb2dpbl9ub19waW4iLCJwYXNzIjpwdyx9DQoNCiAgICAgICAgICAgICAgICBrb2tpID0gKCI7Iikuam9pbihbICIlcz0lcyIgJSAoa2V5LCB2YWx1ZSkgZm9yIGtleSwgdmFsdWUgaW4gcC5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKSBdKQ0KDQogICAgICAgICAgICAgICAga29raSs9JyBtX3BpeGVsX3JhdGlvPTIuNjI1OyB3ZD00MTJ4NzU2Jw0KDQogICAgICAgICAgICAgICAgaGVhZGU9eydIb3N0JzogY2Vib2ssJ2NhY2hlLWNvbnRyb2wnOiAnbWF4LWFnZT0wJywnc2VjLWNoLXVhJzogJyIgTm90IEE7QnJhbmQiO3Y9Ijk5IiwgIkNocm9taXVtIjt2PSI5OCInLCdzZWMtY2gtdWEtbW9iaWxlJzogJz8xJywnc2VjLWNoLXVhLXBsYXRmb3JtJzogJyJBbmRyb2lkIicsJ3VwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMnOiAnMScsJ29yaWdpbic6ICdodHRwczovLycrY2Vib2ssJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLCd1c2VyLWFnZW50JzogdWEsJ2FjY2VwdCc6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjknLCd4LXJlcXVlc3RlZC13aXRoJzogJ1hNTEh0dHBSZXF1ZXN0Jywnc2VjLWZldGNoLXNpdGUnOiAnc2FtZS1vcmlnaW4nLCdzZWMtZmV0Y2gtbW9kZSc6ICdjb3JzJywnc2VjLWZldGNoLWRlc3QnOiAnZW1wdHknLCdyZWZlcmVyJzogJ2h0dHBzOi8vJytjZWJvaysnL2xvZ2luL2RldmljZS1iYXNlZC9wYXNzd29yZC8/dWlkPScrdXNlcisnJmZsb3c9bG9naW5fbm9fcGluJm5leHQ9aHR0cHMlM0ElMkYlMkZtLmZhY2Vib29rLmNvbSUyRnYyLjMlMkZkaWFsb2clMkZvYXV0aCUzRmFwcF9pZCUzRDEyNDAyNDU3NDI4NzQxNCUyNmNidCUzRDE2NTE2NTgyMDA5NzglMjZlMmUlM0QlMjU3QiUyNTIyaW5pdCUyNTIyJTI1M0ExNjUxNjU4MjAwOTc4JTI1N0QlMjZzc28lM0RjaHJvbWVfY3VzdG9tX3RhYiUyNnNjb3BlJTNEZW1haWwlMjZzdGF0ZSUzRCUyNTdCJTI1MjIwX2F1dGhfbG9nZ2VyX2lkJTI1MjIlMjUzQSUyNTIyNjhmMTViYWUtMjNmOC00NjNjLTg2NjAtNWNmMTIyNmQ5N2Y2JTI1MjIlMjUyQyUyNTIyN19jaGFsbGVuZ2UlMjUyMiUyNTNBJTI1MjJkYWhqMjhocXRpZXRtaHJncHJwcCUyNTIyJTI1MkMlMjUyMjNfbWV0aG9kJTI1MjIlMjUzQSUyNTIyY3VzdG9tX3RhYiUyNTIyJTI1N0QlMjZyZWRpcmVjdF91cmklM0RmYmNvbm5lY3QlMjUzQSUyNTJGJTI1MkZjY3QuY29tLmluc3RhdGh1bmRlci5hcHAlMjZyZXNwb25zZV90eXBlJTNEdG9rZW4lMjUyQ3NpZ25lZF9yZXF1ZXN0JTI1MkNncmFwaF9kb21haW4lMjUyQ2dyYW50ZWRfc2NvcGVzJTI2cmV0dXJuX3Njb3BlcyUzRHRydWUlMjZyZXQlM0Rsb2dpbiUyNmZiYXBwX3ByZXMlM0QwJTI2bG9nZ2VyX2lkJTNENjhmMTViYWUtMjNmOC00NjNjLTg2NjAtNWNmMTIyNmQ5N2Y2JTI2dHAlM0R1bnNwZWNpZmllZCZjYW5jZWxfdXJsPWZiY29ubmVjdCUzQSUyRiUyRmNjdC5jb20uaW5zdGF0aHVuZGVyLmFwcCUzRmVycm9yJTNEYWNjZXNzX2RlbmllZCUyNmVycm9yX2NvZGUlM0QyMDAlMjZlcnJvcl9kZXNjcmlwdGlvbiUzRFBlcm1pc3Npb25zJTJCZXJyb3IlMjZlcnJvcl9yZWFzb24lM0R1c2VyX2RlbmllZCUyNnN0YXRlJTNEJTI1N0IlMjUyMjBfYXV0aF9sb2dnZXJfaWQlMjUyMiUyNTNBJTI1MjI2OGYxNWJhZS0yM2Y4LTQ2M2MtODY2MC01Y2YxMjI2ZDk3ZjYlMjUyMiUyNTJDJTI1MjI3X2NoYWxsZW5nZSUyNTIyJTI1M0ElMjUyMmRhaGoyOGhxdGlldG1ocmdwcnBwJTI1MjIlMjUyQyUyNTIyM19tZXRob2QlMjUyMiUyNTNBJTI1MjJjdXN0b21fdGFiJTI1MjIlMjU3RCZkaXNwbGF5PXRvdWNoJmxvY2FsZT1pZF9JRCZwbF9kYmw9MCZyZWZzcmM9ZGVwcmVjYXRlZCZfcmRyJywnYWNjZXB0LWVuY29kaW5nJzogJ2d6aXAsIGRlZmxhdGUsIGJyJywnYWNjZXB0LWxhbmd1YWdlJzogJ2lkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43J30NCg0KICAgICAgICAgICAgICAgIHBvID0gc2Vzc2lvbi5wb3N0KCdodHRwczovLycrY2Vib2srJy9sb2dpbi9kZXZpY2UtYmFzZWQvdmFsaWRhdGUtcGFzc3dvcmQvP3NoYmw9MCZsb2NhbGUyPWlkX0lEJyxkYXRhPWRhdGFhLGNvb2tpZXM9eydjb29raWUnOiBrb2tpfSxoZWFkZXJzPWhlYWRlLGFsbG93X3JlZGlyZWN0cz1GYWxzZSxwcm94aWVzPXByb3hzKQ0KDQogICAgICAgICAgICAgICAgaWYgImNfdXNlciIgaW4gc2Vzc2lvbi5jb29raWVzLmdldF9kaWN0KCk6DQoNCiAgICAgICAgICAgICAgICAgICAgY29veiA9IHNlc3Npb24uY29va2llcy5nZXRfZGljdCgpDQoNCiAgICAgICAgICAgICAgICAgICAgY29raSA9ICdkYXRyPScgKyBjb296WydkYXRyJ10gKyAnOycgKyAoJ2NfdXNlcj0nICsgY29velsnY191c2VyJ10pICsgJzsnICsgKCdmcj0nICsgY29velsnZnInXSkgKyAnOycgKyAoJ3hzPScgKyBjb296Wyd4cyddKQ0KDQogICAgICAgICAgICAgICAgICAgIGlmICJ0IiBpbiBBcGs6DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyZWUgPSBUcmVlKCIiKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICB0cmVlLmFkZChmIntIfTp7dXNlcn1cbntwd30iKS5hZGQoZiJ7Y29raX17Tn1cbiIpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50cyh0cmVlKQ0KDQogICAgICAgICAgICAgICAgICAgIGVsaWYgInkiIGluIEFwazoNCg0KICAgICAgICAgICAgICAgICAgICAgICAgdHJlZSA9IFRyZWUoIiIpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyZWUuYWRkKGYie1V9OiB7dXNlcn1cbntwd30iKS5hZGQoZiJ7Y29raX17Tn1cbiIpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50cyh0cmVlKQ0KDQogICAgICAgICAgICAgICAgICAgIHdydCA9ICdbTElWRV0gJXMg4oCiICVzJyAlICh1c2VyLHB3KQ0KDQogICAgICAgICAgICAgICAgICAgIG9rLmFwcGVuZCh3cnQpDQoNCiAgICAgICAgICAgICAgICAgICAgY2VrX2FwayhzZXNzaW9uLGNva2kpDQoNCiAgICAgICAgICAgICAgICAgICAgb3BlbigncmVzdWx0cy9PSy0lcy0lcy0lcy50eHQnICUgKGhhLCBvcCwgdGEpLCAnYScpLndyaXRlKCclc1xuJyAlIHdydCkNCg0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KDQogICAgICAgICAgICAgICAgZWxpZiAnY2hlY2twb2ludCcgaW4gc2Vzc2lvbi5jb29raWVzLmdldF9kaWN0KCk6DQoNCiAgICAgICAgICAgICAgICAgICAgdHJlZSA9IFRyZWUoIiIpDQoNCiAgICAgICAgICAgICAgICAgICAgdHJlZS5hZGQoZiJ7TX06IHt1c2VyfVxue3B3fVxue3Vha3V9e059XG4iKQ0KDQogICAgICAgICAgICAgICAgICAgIHByaW50cyh0cmVlKQ0KDQogICAgICAgICAgICAgICAgICAgIHdydCA9ICdbQ0hFS10gJXMg4oCiICVzJyAlICh1c2VyLHB3KQ0KDQogICAgICAgICAgICAgICAgICAgIGNwLmFwcGVuZCh3cnQpDQoNCiAgICAgICAgICAgICAgICAgICAgb3BlbigncmVzdWx0cy9DUC0lcy0lcy0lcy50eHQnICUgKGhhLCBvcCwgdGEpLCAnYScpLndyaXRlKCclc1xuJyAlIHdydCkNCg0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KDQogICAgICAgICAgICAgICAgZWxzZToNCg0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KDQogICAgICAgICAgICAgICAgI3RpbWUuc2xlZXAoMzEpDQoNCiAgICAgICAgICAgIGxvb3ArPTENCg0KICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6DQoNCiAgICAgICAgICAgIHNlbGYuX19tZXRvZGVfXyhjZWJvaywgdXNlciwgcGFzdykNCg0KDQoNCg0KDQogICAgZGVmIF9fcGxlcl9fKHNlbGYpOg0KDQogICAgICAgIHlhbiA9IGlucHV0KCdcbiAlc1slcz8lc10gQ2hvb3NlIE1ldGhvZCA6ICclKE4sSyxOKSkNCg0KICAgICAgICBpZiB5YW4gPT0gJyc6DQoNCiAgICAgICAgICAgIHByaW50KCdcbiAlc1slc8OXJXNdIFNvcnJ5LCBpdCBpcyB3cm9uZy4uLiEnJShOLE0sTikpO3NlbGYuX19wbGVyX18oKQ0KDQogICAgICAgIGVsaWYgeWFuIGluICgnMScsICcwMScpOg0KDQogICAgICAgICAgICB4eCA9ICJmcmVlLmZhY2Vib29rLmNvbSINCg0KICAgICAgICAgICAgc2VsZi5rb21iaW5hc2lfcHcoeHgpDQoNCiAgICAgICAgZWxpZiB5YW4gaW4gKCcyJywgJzAyJyk6DQoNCiAgICAgICAgICAgIHh4ID0gIm1iYXNpYy5mYWNlYm9vay5jb20iDQoNCiAgICAgICAgICAgIHNlbGYua29tYmluYXNpX3B3KHh4KQ0KDQogICAgICAgIGVsaWYgeWFuIGluICgnMycsICcwMycpOg0KDQogICAgICAgICAgICB4eCA9ICJtLmZhY2Vib29rLmNvbSINCg0KICAgICAgICAgICAgc2VsZi5rb21iaW5hc2lfcHcoeHgpDQoNCiAgICAgICAgZWxzZToNCg0KICAgICAgICAgICAgcHJpbnQoJ1xuICVzWyVzw5clc10gU29ycnksIGl0IGlzIHdyb25nLi4uISclKE4sTSxOKSk7c2VsZi5fX3BsZXJfXygpDQoNCg0KDQogICAgZGVmIGtvbWJpbmFzaV9wdyhzZWxmLHVybCk6DQoNCiAgICAgICAgcHJpbnQoJyVz4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4gJXNQQVNTV09SRCBNRU5VJXMnJShOLEJNLE4pKQ0KDQogICAgICAgIHByaW50KCcgJXNbJXMxJXNdIG5hbWEsbmFtYTEyMyxuYW1hMTIzNDUnJShOLEgsTikpDQoNCiAgICAgICAgcHJpbnQoJyAlc1slczIlc10gbmFtYSxuYW1hMTIzLG5hbWExMjM0LG5hbWExMjM0NSclKE4sSCxOKSkNCg0KICAgICAgICBwcmludCgnICVzWyVzMyVzXSBuYW1hLG5hbWExMjMsbmFtYTEyMzQsbmFtYTEyMzQ1LCVzK1NhbmRpJXMnJShOLEgsTixILE4pKQ0KDQogICAgICAgIHB3ID0gaW5wdXQoZiJcbiB7Tn1be0t94pyMe059XSBwaWxpaCA6ICIpDQoNCiAgICAgICAgaWYgcHcgaW5bIiJdOg0KDQogICAgICAgICAgICBwcmludChmIiB7Tn1be019IXtOfV0gRG9uJ3QgYmUgZW1wdHkiKTtzZWxmLmtvbWJpbmFzaV9wdyh1cmwpDQoNCiAgICAgICAgZWxpZiBwdyBpblsiMSIsIjAxIl06DQoNCiAgICAgICAgICAgIHByaW50KCclc+KVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxuIFslcyslc10gT0sgOiByZXN1bHRzL09LLSVzLSVzLSVzLnR4dCclKE4sSCxOLGhhLCBvcCwgdGEpKQ0KDQogICAgICAgICAgICBwcmludCgnICVzWyVzKyVzXSBDUCA6IHJlc3VsdHMvQ1AtJXMtJXMtJXMudHh0JyUoTixLLE4saGEsIG9wLCB0YSkpDQoNCiAgICAgICAgICAgIHByaW50KCclc+KVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxuIFslcyElc10gQU5EQSBTRUtBUkFORyBTRURBTkcgTUVOR1VOQUtBTiBVU0VSLUFHRU5UIElOSSB7dWFrdX1cbuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkCclKE4sTSxOLE0sTixNLE4sSCxOKSkNCg0KICAgICAgICAgICAgd2l0aCBZYXlhbkdhbnRlbmcobWF4X3dvcmtlcnM9MzUpIGFzIGtpcmltOg0KDQogICAgICAgICAgICAgICAgZm9yIHludGt0cyBpbiBzZWxmLmlkOg0KDQogICAgICAgICAgICAgICAgICAgdHJ5Og0KDQogICAgICAgICAgICAgICAgICAgICAgIHVpZCwgbmFtZSA9IHludGt0cy5zcGxpdCgnPD0+JykNCg0KICAgICAgICAgICAgICAgICAgICAgICB4eiA9IG5hbWUuc3BsaXQoJyAnKQ0KDQogICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbih4eikgPT0gMyBvciBsZW4oeHopID09IDQgb3IgbGVuKHh6KSA9PSA1IG9yIGxlbih4eikgPT0gNjoNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgcHd4ID0gW25hbWUsIHh6WzBdK3h6WzFdLCB4elswXSsiMTIzIiwgeHpbMF0rIjEyMzQ1Il0NCg0KICAgICAgICAgICAgICAgICAgICAgICBlbHNlOg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICBwd3ggPSBbbmFtZSwgeHpbMF0reHpbMV0sIHh6WzBdKyIxMjMiLCB4elswXSsiMTIzNDUiXQ0KDQogICAgICAgICAgICAgICAgICAgICAgIGtpcmltLnN1Ym1pdChzZWxmLl9fbWV0b2RlX18sdXJsLHVpZCxwd3gpDQoNCiAgICAgICAgICAgICAgICAgICBleGNlcHQ6cGFzcw0KDQogICAgICAgICAgICBoYXNpbChvayxjcCkNCg0KICAgICAgICBlbGlmIHB3IGluWyIyIiwiMDIiXToNCg0KICAgICAgICAgICAgcHJpbnQoJyVz4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4gWyVzKyVzXSBPSyA6IHJlc3VsdHMvT0stJXMtJXMtJXMudHh0JyUoTixILE4saGEsIG9wLCB0YSkpDQoNCiAgICAgICAgICAgIHByaW50KCcgJXNbJXMrJXNdIENQIDogcmVzdWx0cy9DUC0lcy0lcy0lcy50eHQnJShOLEssTixoYSwgb3AsIHRhKSkNCg0KICAgICAgICAgICAgcHJpbnQoJyVz4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4gWyVzISVzXSBNdXN0IGFjdGl2YXRlIGFpcnBsYW5lbW9kZSBvbiBJRCAzMFxuIFslcyElc10gUGxheSBiYWNrIGFpcnBsYW5lbW9kZSBldmVyeSA1MDAgSURcbiBbJXMhJXNdIFRvIHN0b3AgJXNDVFJMK2MlcyBvbiBrZXlib2FyZFxu4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQJyUoTixNLE4sTSxOLE0sTixILE4pKQ0KDQogICAgICAgICAgICB3aXRoIFlheWFuR2FudGVuZyhtYXhfd29ya2Vycz0zNSkgYXMga2lyaW06DQoNCiAgICAgICAgICAgICAgICBmb3IgeW50a3RzIGluIHNlbGYuaWQ6DQoNCiAgICAgICAgICAgICAgICAgICB0cnk6DQoNCiAgICAgICAgICAgICAgICAgICAgICAgdWlkLCBuYW1lID0geW50a3RzLnNwbGl0KCc8PT4nKQ0KDQogICAgICAgICAgICAgICAgICAgICAgIHh6ID0gbmFtZS5zcGxpdCgnICcpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKHh6KSA9PSAzIG9yIGxlbih4eikgPT0gNCBvciBsZW4oeHopID09IDUgb3IgbGVuKHh6KSA9PSA2Og0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICBwd3ggPSBbbmFtZSwgeHpbMF0rIjEyMyIsIHh6WzBdKyIxMjM0IiwgeHpbMF0rIjEyMzQ1IiwgeHpbMF0reHpbMV1dDQoNCiAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgcHd4ID0gW25hbWUsIHh6WzBdKyIxMjMiLCB4elswXSsiMTIzNCIsIHh6WzBdKyIxMjM0NSIsIHh6WzBdK3h6WzFdXQ0KDQogICAgICAgICAgICAgICAgICAgICAgIGtpcmltLnN1Ym1pdChzZWxmLl9fbWV0b2RlX18sdXJsLHVpZCxwd3gpDQoNCiAgICAgICAgICAgICAgICAgICBleGNlcHQ6cGFzcw0KDQogICAgICAgICAgICBoYXNpbChvayxjcCkNCg0KICAgICAgICBlbGlmIHB3IGluWyIzIiwiMDMiXToNCg0KICAgICAgICAgICAgcHJpbnQoJyVz4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4gJXNBRERJVElPTkFMIFBBU1NXT1JEIE1FTlUlcyclKE4sQk0sTikpDQoNCiAgICAgICAgICAgICNwcmludCgiICVzWyVzISVzXSBTZW1ha2luIGJhbnlhayBrb21iaW5hc2kgcGFzc3dvcmQgc2VtYWtpbiBsYW1hIHByb3NlcyBjcmFjayEiJShOLE0sTikpDQoNCiAgICAgICAgICAgIHByaW50KCIgJXNbJXMhJXNdIFVzZSAlc0tPTU1BJXMgZm9yIHNlcGFyYXRvciIlKE4sTSxOLEgsTikpDQoNCiAgICAgICAgICAgIHByaW50KCIgJXNbJXMhJXNdIEV4YW1wbGUgOiAlc3NheWFuZyxyYWhhc2lhLGJpc21pbGxhaCVzIiUoTixNLE4sSCxOKSkNCg0KICAgICAgICAgICAgcHcgPSBpbnB1dChmIiB7Tn1be0t9P3tOfV0gRW50ZXIgYWRkaXRpb25hbCBwYXNzd29yZCA6IHtIfSIpLnNwbGl0KCIsIikNCg0KICAgICAgICAgICAgcHJpbnQoJyVz4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4gWyVzKyVzXSBPSyA6IHJlc3VsdHMvT0stJXMtJXMtJXMudHh0JyUoTixILE4saGEsIG9wLCB0YSkpDQoNCiAgICAgICAgICAgIHByaW50KCcgJXNbJXMrJXNdIENQIDogcmVzdWx0cy9DUC0lcy0lcy0lcy50eHQnJShOLEssTixoYSwgb3AsIHRhKSkNCg0KICAgICAgICAgICAgcHJpbnQoJyVz4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4gWyVzISVzXSBNdXN0IGFjdGl2YXRlIGFpcnBsYW5lbW9kZSBvbiBJRCAzMFxuIFslcyElc10gUGxheSBiYWNrIGFpcnBsYW5lbW9kZSBldmVyeSA1MDAgSURcbiBbJXMhJXNdIFRvIHN0b3AgJXNDVFJMK2MlcyBvbiBrZXlib2FyZFxu4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQJyUoTixNLE4sTSxOLE0sTixILE4pKQ0KDQogICAgICAgICAgICB3aXRoIFlheWFuR2FudGVuZyhtYXhfd29ya2Vycz0zNSkgYXMga2lyaW06DQoNCiAgICAgICAgICAgICAgICBmb3IgeW50a3RzIGluIHNlbGYuaWQ6DQoNCiAgICAgICAgICAgICAgICAgICB0cnk6DQoNCiAgICAgICAgICAgICAgICAgICAgICAgdWlkLCBuYW1lID0geW50a3RzLnNwbGl0KCc8PT4nKQ0KDQogICAgICAgICAgICAgICAgICAgICAgIHh6ID0gbmFtZS5zcGxpdCgnICcpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKHh6KSA9PSAzIG9yIGxlbih4eikgPT0gNCBvciBsZW4oeHopID09IDUgb3IgbGVuKHh6KSA9PSA2Og0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICB4eHggPSBbbmFtZSwgeHpbMF0rIjEyMyIsIHh6WzBdKyIxMjM0IiwgeHpbMF0rIjEyMzQ1IiwgeHpbMF0reHpbMV1dDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCA9IHh4eCArIHB3DQoNCiAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgeHh4ID0gW25hbWUsIHh6WzBdKyIxMjMiLCB4elswXSsiMTIzNCIsIHh6WzBdKyIxMjM0NSIsIHh6WzBdK3h6WzFdXQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICBwd3ggPSB4eHggKyBwdw0KDQogICAgICAgICAgICAgICAgICAgICAgIGtpcmltLnN1Ym1pdChzZWxmLl9fbWV0b2RlX18sdXJsLHVpZCxwd3gpDQoNCiAgICAgICAgICAgICAgICAgICBleGNlcHQ6cGFzcw0KDQogICAgICAgICAgICBoYXNpbChvayxjcCkNCg0KICAgICAgICBlbHNlOg0KDQogICAgICAgICAgICBwcmludChmIlxuIHtOfVt7TX0he059XSBDb3JyZWN0IGlucHV0Iik7c2VsZi5rb21iaW5hc2lfcHcodXJsKQ0KDQoNCg0KaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoNCg0KICAgIGxvZ2luKCkNCg0KICAgICNjZWtfcHcoKQ=="))